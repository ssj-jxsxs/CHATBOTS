<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ ChatBot F√≠sica UNALM | Temperatura & Calor - Versi√≥n Avanzada</title>
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Fuente cient√≠fica -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Chart.js para gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- MathJax para f√≥rmulas matem√°ticas -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        /* ===== RESET Y VARIABLES MEJORADAS ===== */
        :root {
            --primary-blue: #1a237e;
            --secondary-blue: #283593;
            --accent-blue: #3949ab;
            --light-blue: #e8eaf6;
            --unalm-green: #2e7d32;
            --unalm-light-green: #4caf50;
            --warning-orange: #ff9800;
            --danger-red: #f44336;
            --success-green: #4caf50;
            --dark-bg: #0a192f;
            --darker-bg: #071123;
            --light-bg: #f5f7ff;
            --card-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            --card-shadow-hover: 0 15px 35px rgba(0, 0, 0, 0.2);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --gradient-primary: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-blue) 100%);
            --gradient-accent: linear-gradient(45deg, var(--unalm-light-green), var(--accent-blue));
            --gradient-warning: linear-gradient(45deg, var(--warning-orange), #ff5722);
            --gradient-success: linear-gradient(45deg, var(--success-green), #2e7d32);
            --gradient-chatbot: linear-gradient(135deg, #1a237e 0%, #0d47a1 50%, #1565c0 100%);
            --neumorphic-shadow: 20px 20px 60px #0c1a32, -20px -20px 60px #0a1f40;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(145deg, var(--dark-bg) 0%, var(--darker-bg) 100%);
            color: #e6f1ff;
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ===== ANIMACIONES MEJORADAS ===== */
        @keyframes float {
            0%, 100% { 
                transform: translateY(0) rotate(0deg); 
            }
            33% { 
                transform: translateY(-10px) rotate(1deg); 
            }
            66% { 
                transform: translateY(5px) rotate(-1deg); 
            }
        }

        @keyframes pulse {
            0%, 100% { 
                transform: scale(1); 
                opacity: 1; 
            }
            50% { 
                transform: scale(1.05); 
                opacity: 0.8; 
            }
        }

        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateX(-30px); 
            }
            to { 
                opacity: 1; 
                transform: translateX(0); 
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }

        @keyframes blink {
            50% { border-color: transparent }
        }

        /* ===== CONTENEDOR PRINCIPAL MEJORADO ===== */
        .main-container {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 0;
            max-width: 1600px;
            margin: 0 auto;
            height: 100vh;
            background: linear-gradient(145deg, rgba(10, 25, 47, 0.98), rgba(7, 17, 35, 0.95));
            border-radius: 0;
            overflow: hidden;
            box-shadow: var(--neumorphic-shadow);
            position: relative;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 255, 218, 0.1);
        }

        .main-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(100, 255, 218, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(57, 73, 171, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(30, 60, 114, 0.03) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        /* ===== PANEL LATERAL EXPANDIDO ===== */
        .sidebar {
            background: linear-gradient(180deg, 
                rgba(26, 35, 126, 0.95) 0%, 
                rgba(17, 27, 71, 0.92) 100%);
            padding: 35px 25px;
            overflow-y: auto;
            border-right: 3px solid rgba(100, 255, 218, 0.3);
            position: relative;
            z-index: 1;
            backdrop-filter: blur(15px);
            box-shadow: 5px 0 25px rgba(0, 0, 0, 0.3);
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-accent);
            background-size: 200% 100%;
            animation: shimmer 3s infinite linear;
            z-index: 2;
        }

        .sidebar::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(100, 255, 218, 0.5) 50%, 
                transparent 100%);
            z-index: 2;
        }

        .university-header {
            text-align: center;
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 2px solid rgba(100, 255, 218, 0.2);
            position: relative;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 255, 218, 0.1);
        }

        .university-header h2 {
            color: white;
            font-size: 20px;
            margin-bottom: 10px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            background: var(--gradient-chatbot);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .university-header p {
            color: #b0b0ff;
            font-size: 14px;
            opacity: 0.9;
            line-height: 1.5;
        }

        .university-header .logo {
            width: 60px;
            height: 60px;
            margin: 0 auto 15px;
            background: var(--gradient-accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: float 6s ease-in-out infinite;
        }

        .teacher-info {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.07) 0%, 
                rgba(100, 255, 218, 0.05) 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid var(--unalm-light-green);
            border-right: 1px solid rgba(100, 255, 218, 0.1);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .teacher-info:hover {
            transform: translateY(-3px);
            box-shadow: var(--card-shadow);
            border-left-color: #64ffda;
        }

        .teacher-info::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(100, 255, 218, 0.5), 
                transparent);
        }

        .teacher-info h3 {
            color: #64ffda;
            font-size: 18px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
        }

        .teacher-info p {
            color: #a0a0ff;
            font-size: 14px;
            margin-bottom: 5px;
            line-height: 1.6;
        }

        .teacher-info .contact-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 13px;
        }

        .contact-item i {
            color: #64ffda;
            font-size: 16px;
        }

        .nav-section {
            margin-bottom: 35px;
            position: relative;
        }

        .nav-section::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, 
                transparent, 
                rgba(100, 255, 218, 0.3), 
                transparent);
        }

        .nav-title {
            color: #64ffda;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(100, 255, 218, 0.2);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .nav-title i {
            font-size: 22px;
            background: var(--gradient-accent);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: pulse 2s infinite;
        }

        .nav-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .nav-item {
            position: relative;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            left: -25px;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 8px;
            background: rgba(100, 255, 218, 0.5);
            border-radius: 50%;
            opacity: 0;
            transition: var(--transition);
        }

        .nav-item:hover::before {
            opacity: 1;
            animation: pulse 1s infinite;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 16px 20px;
            background: linear-gradient(90deg, 
                rgba(255, 255, 255, 0.05) 0%, 
                rgba(100, 255, 218, 0.02) 100%);
            border-radius: 12px;
            color: #c0c0ff;
            text-decoration: none;
            font-size: 15px;
            transition: var(--transition);
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
            font-weight: 500;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(100, 255, 218, 0.1), 
                transparent);
            transition: left 0.6s;
        }

        .nav-link:hover::before {
            left: 100%;
        }

        .nav-link:hover {
            background: linear-gradient(90deg, 
                rgba(100, 255, 218, 0.1) 0%, 
                rgba(57, 73, 171, 0.1) 100%);
            color: white;
            transform: translateX(10px) translateY(-2px);
            border-color: rgba(100, 255, 218, 0.3);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .nav-link.active {
            background: linear-gradient(90deg, 
                rgba(100, 255, 218, 0.15) 0%, 
                rgba(57, 73, 171, 0.15) 100%);
            color: white;
            font-weight: 600;
            border-color: rgba(100, 255, 218, 0.5);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.1);
        }

        .nav-link.active i {
            animation: pulse 1.5s infinite;
        }

        .nav-link i {
            font-size: 20px;
            min-width: 24px;
            text-align: center;
        }

        .nav-link .badge {
            margin-left: auto;
            background: rgba(100, 255, 218, 0.2);
            color: #64ffda;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            border: 1px solid rgba(100, 255, 218, 0.3);
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 25px;
        }

        .quick-btn {
            padding: 14px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.08) 0%, 
                rgba(100, 255, 218, 0.05) 100%);
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 10px;
            color: #64ffda;
            font-size: 13px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            text-align: center;
            position: relative;
            overflow: hidden;
            font-weight: 500;
        }

        .quick-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-accent);
            opacity: 0;
            transition: var(--transition);
            z-index: -1;
        }

        .quick-btn:hover {
            transform: translateY(-3px);
            color: white;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            border-color: transparent;
        }

        .quick-btn:hover::before {
            opacity: 1;
        }

        .quick-btn i {
            font-size: 20px;
            margin-bottom: 5px;
        }

        /* ===== SISTEMA DE B√öSQUEDA MEJORADO ===== */
        .search-container {
            margin: 25px 0;
            position: relative;
        }

        .search-box {
            position: relative;
            width: 100%;
        }

        .search-box input {
            width: 100%;
            padding: 16px 20px 16px 50px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(100, 255, 218, 0.2);
            border-radius: 12px;
            color: white;
            font-size: 15px;
            transition: var(--transition);
            outline: none;
            font-family: 'Roboto', sans-serif;
        }

        .search-box input:focus {
            border-color: #64ffda;
            background: rgba(100, 255, 218, 0.05);
            box-shadow: 0 0 0 4px rgba(100, 255, 218, 0.1);
        }

        .search-box input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #64ffda;
            font-size: 20px;
            pointer-events: none;
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(10, 25, 47, 0.98);
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 12px;
            margin-top: 10px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            backdrop-filter: blur(20px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            display: none;
        }

        .search-result-item {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .search-result-item:hover {
            background: rgba(100, 255, 218, 0.1);
        }

        .search-result-item i {
            color: #64ffda;
            font-size: 18px;
        }

        .search-result-item span {
            font-size: 14px;
            color: #e6f1ff;
        }

        /* ===== √ÅREA DEL CHAT EXPANDIDA ===== */
        .chat-area {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: linear-gradient(135deg, 
                rgba(10, 25, 47, 0.95) 0%, 
                rgba(7, 17, 35, 0.92) 100%);
            position: relative;
            overflow: hidden;
        }

        /* HEADER DEL CHAT MEJORADO */
        .chat-header {
            background: linear-gradient(135deg, 
                rgba(26, 35, 126, 0.9) 0%, 
                rgba(39, 58, 147, 0.85) 50%, 
                rgba(30, 60, 114, 0.8) 100%);
            padding: 30px 40px;
            border-bottom: 3px solid rgba(100, 255, 218, 0.3);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(20px);
            z-index: 1;
        }

        .chat-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                url('data:image/svg+xml,<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg"><path d="M20,20 L180,20 L180,180 L20,180 Z" fill="none" stroke="rgba(100,255,218,0.08)" stroke-width="2"/></svg>') repeat,
                radial-gradient(circle at 30% 30%, rgba(100, 255, 218, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(57, 73, 171, 0.1) 0%, transparent 50%);
            opacity: 0.5;
            z-index: -1;
        }

        .chat-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(100, 255, 218, 0.5), 
                transparent);
        }

        .chat-title {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .chat-title-left {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .chat-title h1 {
            font-size: 32px;
            font-weight: 800;
            color: white;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            background: linear-gradient(45deg, #64ffda, #7986cb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.5px;
        }

        .bot-badge {
            background: var(--gradient-accent);
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 700;
            color: white;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            animation: pulse 3s infinite;
            box-shadow: 0 5px 20px rgba(100, 255, 218, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .bot-badge::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                transparent, 
                rgba(255, 255, 255, 0.1), 
                transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite linear;
        }

        .chat-subtitle {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .chat-subtitle span {
            color: #a0a0ff;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .level-badge {
            background: var(--gradient-warning);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
            animation: float 4s ease-in-out infinite;
        }

        .chat-stats {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-item i {
            color: #64ffda;
            font-size: 20px;
        }

        .stat-item span {
            font-size: 14px;
            color: #c0c0ff;
        }

        .stat-item .stat-value {
            color: #64ffda;
            font-weight: 700;
            font-size: 18px;
        }

        /* CUERPO DEL CHAT EXPANDIDO */
        .chat-body {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            background: linear-gradient(135deg, 
                rgba(10, 25, 47, 0.95) 0%, 
                rgba(12, 30, 62, 0.9) 100%);
            position: relative;
        }

        .chat-body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 10% 90%, rgba(100, 255, 218, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 90% 10%, rgba(57, 73, 171, 0.03) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .message-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* MENSAJES MEJORADOS */
        .message {
            max-width: 88%;
            padding: 30px;
            border-radius: 25px;
            position: relative;
            animation: messageAppear 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            box-shadow: var(--card-shadow);
            line-height: 1.8;
            backdrop-filter: blur(10px);
            border: 1px solid transparent;
            transition: var(--transition);
        }

        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .bot-message {
            align-self: flex-start;
            background: linear-gradient(135deg, 
                rgba(26, 35, 126, 0.85), 
                rgba(39, 58, 147, 0.8));
            border-color: rgba(100, 255, 218, 0.3);
            border-left: 8px solid #64ffda;
            color: #e6f1ff;
        }

        .bot-message:hover {
            transform: translateX(5px);
            box-shadow: var(--card-shadow-hover);
        }

        .user-message {
            align-self: flex-end;
            background: linear-gradient(135deg, 
                rgba(30, 60, 114, 0.85), 
                rgba(42, 82, 152, 0.8));
            border-color: rgba(57, 73, 171, 0.4);
            border-right: 8px solid var(--accent-blue);
            color: white;
        }

        .user-message:hover {
            transform: translateX(-5px);
            box-shadow: var(--card-shadow-hover);
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.15);
        }

        .message-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 22px;
            flex-shrink: 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 3px solid rgba(255, 255, 255, 0.2);
        }

        .bot-avatar {
            background: var(--gradient-accent);
            color: var(--dark-bg);
        }

        .user-avatar {
            background: linear-gradient(45deg, var(--accent-blue), #7986cb);
            color: white;
        }

        .message-sender {
            font-weight: 700;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .bot-sender {
            color: #64ffda;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .user-sender {
            color: #7986cb;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .message-time {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .message-time i {
            font-size: 16px;
        }

        /* CONTENIDO DE MENSAJES EXPANDIDO */
        .message-content {
            font-size: 16px;
        }

        .message-content h2 {
            color: #64ffda;
            margin: 25px 0 20px 0;
            font-size: 26px;
            border-bottom: 3px solid rgba(100, 255, 218, 0.4);
            padding-bottom: 12px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            font-weight: 800;
        }

        .message-content h3 {
            color: #64ffda;
            margin: 22px 0 18px 0;
            font-size: 22px;
            border-bottom: 2px solid rgba(100, 255, 218, 0.3);
            padding-bottom: 10px;
            font-weight: 700;
        }

        .message-content h4 {
            color: #a0a0ff;
            margin: 20px 0 15px 0;
            font-size: 19px;
            font-weight: 600;
        }

        .message-content h5 {
            color: #7986cb;
            margin: 18px 0 12px 0;
            font-size: 17px;
            font-weight: 600;
        }

        .message-content p {
            margin-bottom: 18px;
            text-align: justify;
            line-height: 1.8;
        }

        .message-content ul, .message-content ol {
            margin: 20px 0 20px 30px;
        }

        .message-content li {
            margin-bottom: 12px;
            position: relative;
            line-height: 1.8;
        }

        .message-content li::before {
            content: '‚ñ∏';
            color: #64ffda;
            position: absolute;
            left: -25px;
            font-size: 20px;
            font-weight: bold;
        }

        /* COMPONENTES ESPECIALES MEJORADOS */
        .formula-box {
            background: linear-gradient(135deg, 
                rgba(0, 0, 0, 0.35) 0%, 
                rgba(26, 35, 126, 0.2) 100%);
            border: 2px solid rgba(100, 255, 218, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            font-family: 'Source Code Pro', monospace;
            font-size: 18px;
            color: #64ffda;
            overflow-x: auto;
            position: relative;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .formula-box::before {
            content: 'F√ìRMULA MATEM√ÅTICA';
            position: absolute;
            top: -12px;
            left: 25px;
            background: linear-gradient(45deg, var(--primary-blue), var(--secondary-blue));
            color: #64ffda;
            padding: 6px 15px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            border: 2px solid rgba(100, 255, 218, 0.3);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .formula-box.mathjax {
            font-family: 'Source Code Pro', monospace;
            font-size: 16px;
            padding: 20px;
            text-align: center;
            background: rgba(0, 0, 0, 0.4);
            border: 2px dashed rgba(100, 255, 218, 0.4);
        }

        .note-box {
            background: linear-gradient(135deg, 
                rgba(255, 152, 0, 0.15) 0%, 
                rgba(255, 87, 34, 0.1) 100%);
            border-left: 6px solid var(--warning-orange);
            border-right: 1px solid rgba(255, 152, 0, 0.2);
            padding: 22px;
            margin: 25px 0;
            border-radius: 0 15px 15px 0;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 25px rgba(255, 152, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .note-box::before {
            content: 'üí°';
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 30px;
            opacity: 0.2;
        }

        .note-box strong {
            color: var(--warning-orange);
            display: block;
            margin-bottom: 12px;
            font-size: 18px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .warning-box {
            background: linear-gradient(135deg, 
                rgba(244, 67, 54, 0.15) 0%, 
                rgba(229, 57, 53, 0.1) 100%);
            border-left: 6px solid var(--danger-red);
            border-right: 1px solid rgba(244, 67, 54, 0.2);
            padding: 22px;
            margin: 25px 0;
            border-radius: 0 15px 15px 0;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 25px rgba(244, 67, 54, 0.1);
        }

        .warning-box strong {
            color: var(--danger-red);
            display: block;
            margin-bottom: 12px;
            font-size: 18px;
            font-weight: 700;
        }

        .exercise-box {
            background: linear-gradient(135deg, 
                rgba(76, 175, 80, 0.15) 0%, 
                rgba(46, 125, 50, 0.1) 100%);
            border: 3px solid var(--success-green);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(76, 175, 80, 0.2);
        }

        .exercise-box::before {
            content: 'üìù EJERCICIO RESUELTO';
            position: absolute;
            top: 0;
            right: 0;
            background: var(--gradient-success);
            color: white;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 800;
            border-radius: 0 0 0 20px;
            letter-spacing: 1px;
            text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }

        .exercise-box::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, 
                transparent 70%, 
                rgba(76, 175, 80, 0.1) 100%);
            pointer-events: none;
        }

        .exercise-step {
            margin: 18px 0;
            padding: 20px;
            padding-left: 25px;
            border-left: 4px solid var(--success-green);
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0 12px 12px 0;
            position: relative;
            transition: var(--transition);
        }

        .exercise-step:hover {
            transform: translateX(5px);
            background: rgba(255, 255, 255, 0.08);
        }

        .exercise-step-number {
            position: absolute;
            left: -15px;
            top: 50%;
            transform: translateY(-50%);
            width: 30px;
            height: 30px;
            background: var(--success-green);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            border: 2px solid white;
        }

        .material-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 30px 0;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.05) 0%, 
                rgba(100, 255, 218, 0.02) 100%);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .material-table th {
            background: linear-gradient(135deg, 
                var(--primary-blue) 0%, 
                var(--secondary-blue) 100%);
            color: white;
            padding: 22px 20px;
            text-align: left;
            font-weight: 700;
            font-size: 16px;
            border-bottom: 3px solid var(--accent-blue);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .material-table th::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.5), 
                transparent);
        }

        .material-table td {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: #e6f1ff;
            font-size: 15px;
            transition: var(--transition);
        }

        .material-table tr:hover td {
            background: rgba(100, 255, 218, 0.08);
            transform: translateY(-2px);
        }

        .material-table tr:last-child td {
            border-bottom: none;
        }

        .material-table .highlight-cell {
            background: rgba(100, 255, 218, 0.15);
            color: #64ffda;
            font-weight: 700;
        }

        .highlight {
            color: #64ffda;
            font-weight: 700;
            background: rgba(100, 255, 218, 0.15);
            padding: 4px 10px;
            border-radius: 8px;
            border: 1px solid rgba(100, 255, 218, 0.3);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .unit {
            color: #7986cb;
            font-style: italic;
            font-size: 15px;
            font-family: 'Source Code Pro', monospace;
        }

        .variable {
            color: #64ffda;
            font-family: 'Source Code Pro', monospace;
            font-weight: 600;
        }

        /* GR√ÅFICOS Y DIAGRAMAS */
        .chart-container {
            margin: 30px 0;
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 1px solid rgba(100, 255, 218, 0.2);
            position: relative;
            overflow: hidden;
        }

        .chart-container::before {
            content: 'üìà GR√ÅFICO INTERACTIVO';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, 
                var(--primary-blue), 
                var(--secondary-blue));
            color: white;
            padding: 10px 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            text-align: center;
        }

        .chart-canvas {
            width: 100% !important;
            height: 300px !important;
            margin-top: 40px;
        }

        .diagram-box {
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, 
                rgba(26, 35, 126, 0.2) 0%, 
                rgba(39, 58, 147, 0.15) 100%);
            border-radius: 20px;
            border: 2px solid rgba(100, 255, 218, 0.3);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .diagram-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(100, 255, 218, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(57, 73, 171, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .diagram-title {
            color: #64ffda;
            font-size: 20px;
            margin-bottom: 25px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            display: inline-block;
            padding-bottom: 10px;
        }

        .diagram-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: var(--gradient-accent);
            border-radius: 3px;
        }

        /* SISTEMA DE SIMULACIONES */
        .simulation-container {
            margin: 35px 0;
            padding: 30px;
            background: linear-gradient(135deg, 
                rgba(0, 0, 0, 0.4) 0%, 
                rgba(26, 35, 126, 0.3) 100%);
            border-radius: 25px;
            border: 3px solid rgba(100, 255, 218, 0.4);
            position: relative;
            overflow: hidden;
        }

        .simulation-container::before {
            content: 'üéÆ SIMULACI√ìN INTERACTIVA';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: var(--gradient-primary);
            color: white;
            padding: 12px 25px;
            font-size: 14px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .simulation-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 40px;
            margin-bottom: 25px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .control-group {
            flex: 1;
            min-width: 200px;
        }

        .control-label {
            display: block;
            margin-bottom: 12px;
            color: #64ffda;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider-container input[type="range"] {
            flex: 1;
            height: 8px;
            -webkit-appearance: none;
            background: linear-gradient(90deg, 
                var(--primary-blue), 
                var(--accent-blue));
            border-radius: 10px;
            outline: none;
        }

        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: var(--gradient-accent);
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .slider-value {
            min-width: 60px;
            text-align: center;
            padding: 8px 12px;
            background: rgba(100, 255, 218, 0.1);
            border-radius: 10px;
            color: #64ffda;
            font-weight: 700;
            font-size: 16px;
            border: 1px solid rgba(100, 255, 218, 0.3);
        }

        .simulation-display {
            padding: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            border: 2px dashed rgba(100, 255, 218, 0.3);
            text-align: center;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* SISTEMA DE QUIZ Y EVALUACI√ìN */
        .quiz-container {
            margin: 35px 0;
            padding: 30px;
            background: linear-gradient(135deg, 
                rgba(57, 73, 171, 0.15) 0%, 
                rgba(100, 255, 218, 0.1) 100%);
            border-radius: 25px;
            border: 3px solid rgba(57, 73, 171, 0.3);
            position: relative;
            overflow: hidden;
        }

        .quiz-container::before {
            content: 'üß† TEST DE CONOCIMIENTOS';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, 
                var(--primary-blue), 
                var(--accent-blue));
            color: white;
            padding: 12px 25px;
            font-size: 14px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .quiz-question {
            margin-top: 40px;
            margin-bottom: 25px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border-left: 6px solid var(--accent-blue);
        }

        .quiz-question-text {
            font-size: 18px;
            color: #e6f1ff;
            margin-bottom: 25px;
            font-weight: 600;
            line-height: 1.7;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }

        .quiz-option {
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 16px;
        }

        .quiz-option:hover {
            background: rgba(100, 255, 218, 0.1);
            border-color: rgba(100, 255, 218, 0.3);
            transform: translateY(-3px);
        }

        .quiz-option.selected {
            background: rgba(100, 255, 218, 0.2);
            border-color: #64ffda;
            color: #64ffda;
            font-weight: 700;
        }

        .quiz-option.correct {
            background: rgba(76, 175, 80, 0.2);
            border-color: var(--success-green);
            color: #4caf50;
        }

        .quiz-option.incorrect {
            background: rgba(244, 67, 54, 0.2);
            border-color: var(--danger-red);
            color: #f44336;
        }

        .quiz-option-letter {
            width: 40px;
            height: 40px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            flex-shrink: 0;
        }

        .quiz-feedback {
            margin-top: 25px;
            padding: 20px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-left: 6px solid;
            display: none;
        }

        .quiz-feedback.correct {
            border-left-color: var(--success-green);
            background: rgba(76, 175, 80, 0.1);
        }

        .quiz-feedback.incorrect {
            border-left-color: var(--danger-red);
            background: rgba(244, 67, 54, 0.1);
        }

        .quiz-feedback.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        .quiz-action {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 15px 30px;
            background: var(--gradient-accent);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 20px;
        }

        .quiz-action:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(100, 255, 218, 0.3);
        }

        .quiz-results {
            margin-top: 30px;
            padding: 30px;
            background: linear-gradient(135deg, 
                rgba(26, 35, 126, 0.2), 
                rgba(39, 58, 147, 0.15));
            border-radius: 20px;
            text-align: center;
            border: 2px solid rgba(100, 255, 218, 0.3);
        }

        .quiz-score {
            font-size: 48px;
            font-weight: 800;
            color: #64ffda;
            margin: 20px 0;
            text-shadow: 0 4px 15px rgba(100, 255, 218, 0.3);
        }

        /* INPUT AREA MEJORADA */
        .input-area {
            padding: 30px 40px;
            background: linear-gradient(135deg, 
                rgba(10, 25, 47, 0.95), 
                rgba(7, 17, 35, 0.92));
            border-top: 3px solid rgba(57, 73, 171, 0.4);
            backdrop-filter: blur(20px);
            position: relative;
            z-index: 1;
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.2);
        }

        .input-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(100, 255, 218, 0.5), 
                transparent);
        }

        .input-container {
            display: flex;
            gap: 20px;
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
        }

        #userInput {
            flex: 1;
            padding: 22px 30px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.07) 0%, 
                rgba(100, 255, 218, 0.05) 100%);
            border: 3px solid rgba(100, 255, 218, 0.3);
            border-radius: 20px;
            color: white;
            font-size: 18px;
            font-family: 'Roboto', sans-serif;
            transition: var(--transition);
            outline: none;
            backdrop-filter: blur(10px);
        }

        #userInput:focus {
            border-color: #64ffda;
            background: linear-gradient(135deg, 
                rgba(100, 255, 218, 0.1) 0%, 
                rgba(57, 73, 171, 0.08) 100%);
            box-shadow: 0 0 0 5px rgba(100, 255, 218, 0.15);
            transform: translateY(-2px);
        }

        #userInput::placeholder {
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
        }

        #sendButton {
            padding: 0 45px;
            background: var(--gradient-accent);
            border: none;
            border-radius: 20px;
            color: white;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
            white-space: nowrap;
            box-shadow: 0 8px 25px rgba(100, 255, 218, 0.3);
            position: relative;
            overflow: hidden;
        }

        #sendButton::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: left 0.6s;
        }

        #sendButton:hover::before {
            left: 100%;
        }

        #sendButton:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(100, 255, 218, 0.4);
        }

        #sendButton:active {
            transform: translateY(0);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.3);
        }

        .input-actions {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            justify-content: center;
        }

        .input-action-btn {
            padding: 12px 25px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(100, 255, 218, 0.2);
            border-radius: 15px;
            color: #a0a0ff;
            font-size: 14px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .input-action-btn:hover {
            background: rgba(100, 255, 218, 0.1);
            color: white;
            border-color: rgba(100, 255, 218, 0.4);
            transform: translateY(-2px);
        }

        .quick-question-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            max-width: 1000px;
            margin: 25px auto 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .quick-question {
            padding: 15px 25px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.07) 0%, 
                rgba(100, 255, 218, 0.05) 100%);
            border: 2px solid rgba(100, 255, 218, 0.3);
            border-radius: 30px;
            color: #a0a0ff;
            font-size: 15px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .quick-question::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-accent);
            opacity: 0;
            transition: var(--transition);
            z-index: -1;
        }

        .quick-question:hover {
            color: white;
            transform: translateY(-3px);
            border-color: transparent;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .quick-question:hover::before {
            opacity: 1;
        }

        .quick-question i {
            font-size: 20px;
        }

        /* FOOTER MEJORADO */
        .chat-footer {
            text-align: center;
            padding: 25px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 14px;
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            background: rgba(0, 0, 0, 0.25);
            backdrop-filter: blur(10px);
            position: relative;
        }

        .chat-footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(100, 255, 218, 0.3), 
                transparent);
        }

        .chat-footer p {
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .footer-link {
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }

        .footer-link:hover {
            color: #64ffda;
            transform: translateY(-2px);
        }

        /* MODAL DE CONFIGURACI√ìN */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background: linear-gradient(135deg, 
                rgba(10, 25, 47, 0.95), 
                rgba(7, 17, 35, 0.92));
            border-radius: 30px;
            padding: 40px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            border: 2px solid rgba(100, 255, 218, 0.3);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            position: relative;
            animation: slideIn 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(100, 255, 218, 0.3);
        }

        .modal-header h2 {
            color: #64ffda;
            font-size: 28px;
            font-weight: 700;
            background: var(--gradient-accent);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modal-close {
            background: none;
            border: none;
            color: #64ffda;
            font-size: 30px;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
        }

        .modal-close:hover {
            background: rgba(100, 255, 218, 0.1);
            transform: rotate(90deg);
        }

        .modal-body {
            color: #e6f1ff;
            line-height: 1.8;
        }

        .modal-body h3 {
            color: #64ffda;
            margin: 25px 0 15px 0;
            font-size: 20px;
            font-weight: 600;
        }

        .modal-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
        }

        .modal-option:hover {
            background: rgba(100, 255, 218, 0.1);
            transform: translateX(5px);
        }

        .modal-option label {
            font-size: 16px;
            font-weight: 500;
            color: #e6f1ff;
            flex: 1;
        }

        .modal-option select,
        .modal-option input {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(100, 255, 218, 0.3);
            border-radius: 10px;
            color: white;
            padding: 12px 20px;
            font-size: 16px;
            min-width: 150px;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            transition: .4s;
            border-radius: 34px;
            border: 2px solid rgba(100, 255, 218, 0.3);
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 2px;
            bottom: 2px;
            background: var(--gradient-accent);
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background: rgba(100, 255, 218, 0.2);
            border-color: #64ffda;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .modal-actions {
            display: flex;
            gap: 20px;
            margin-top: 30px;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 15px 30px;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }

        .modal-btn.primary {
            background: var(--gradient-accent);
            color: white;
        }

        .modal-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e6f1ff;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .modal-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        /* LOADING Y ANIMACIONES */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 1px solid rgba(100, 255, 218, 0.2);
            margin: 20px 0;
        }

        .typing-dots {
            display: flex;
            gap: 8px;
        }

        .typing-dots span {
            width: 10px;
            height: 10px;
            background: #64ffda;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out both;
        }

        .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
        .typing-dots span:nth-child(2) { animation-delay: -0.16s; }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-accent);
            border-radius: 10px;
            transition: width 0.3s ease;
            animation: shimmer 2s infinite linear;
        }

        /* NOTIFICACIONES */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 20px 30px;
            background: linear-gradient(135deg, 
                rgba(26, 35, 126, 0.95), 
                rgba(39, 58, 147, 0.9));
            border-radius: 15px;
            border-left: 6px solid #64ffda;
            color: white;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 9999;
            transform: translateX(400px);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-width: 400px;
            backdrop-filter: blur(10px);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .notification-icon {
            font-size: 28px;
            color: #64ffda;
        }

        .notification-message h4 {
            color: #64ffda;
            margin-bottom: 5px;
            font-size: 16px;
            font-weight: 700;
        }

        .notification-message p {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }

        /* ===== RESPONSIVE MEJORADO ===== */
        @media (max-width: 1400px) {
            .main-container {
                grid-template-columns: 300px 1fr;
                max-width: 100%;
            }
        }

        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 280px 1fr;
            }
            
            .chat-header {
                padding: 25px 30px;
            }
            
            .chat-title h1 {
                font-size: 28px;
            }
        }

        @media (max-width: 992px) {
            .main-container {
                grid-template-columns: 1fr;
                height: auto;
                min-height: 100vh;
            }
            
            .sidebar {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                bottom: 0;
                width: 320px;
                z-index: 1000;
                transform: translateX(-100%);
                transition: transform 0.3s ease-out;
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .mobile-menu-toggle {
                display: flex;
                position: fixed;
                bottom: 20px;
                right: 20px;
                width: 60px;
                height: 60px;
                background: var(--gradient-accent);
                border-radius: 50%;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 24px;
                cursor: pointer;
                z-index: 1001;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
                transition: var(--transition);
            }
            
            .mobile-menu-toggle:hover {
                transform: scale(1.1);
            }
            
            .message {
                max-width: 92%;
            }
            
            .quiz-options {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .chat-header {
                padding: 20px;
            }
            
            .chat-title {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .chat-title h1 {
                font-size: 24px;
            }
            
            .bot-badge {
                font-size: 14px;
                padding: 10px 20px;
            }
            
            .chat-subtitle {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .chat-stats {
                flex-direction: column;
                gap: 10px;
            }
            
            .input-container {
                flex-direction: column;
            }
            
            #sendButton {
                width: 100%;
                justify-content: center;
                padding: 20px;
            }
            
            .quick-question-buttons {
                justify-content: flex-start;
            }
            
            .quick-question {
                flex: 1;
                min-width: 160px;
            }
            
            .modal-content {
                padding: 30px 20px;
                width: 95%;
            }
        }

        @media (max-width: 576px) {
            .chat-body {
                padding: 20px;
            }
            
            .message {
                padding: 20px;
                max-width: 95%;
            }
            
            .message-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .message-time {
                margin-left: 0;
            }
            
            .quick-question-buttons {
                flex-direction: column;
            }
            
            .quick-question {
                width: 100%;
                justify-content: center;
            }
            
            .simulation-controls {
                flex-direction: column;
            }
            
            .control-group {
                min-width: 100%;
            }
        }

        /* SCROLLBAR MEJORADA */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-accent);
            border-radius: 10px;
            border: 3px solid transparent;
            background-clip: content-box;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, #4caf50, #64ffda);
            background-clip: content-box;
        }

        ::-webkit-scrollbar-corner {
            background: transparent;
        }

        /* UTILIDADES */
        .text-gradient {
            background: var(--gradient-accent);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .floating {
            animation: float 6s ease-in-out infinite;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .shimmer {
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.1), 
                transparent);
            background-size: 200% 100%;
            animation: shimmer 3s infinite linear;
        }

        .hidden {
            display: none !important;
        }

        .visible {
            display: block !important;
        }

        /* ANIMACIONES DE ENTRADA */
        .animate-in {
            animation: slideIn 0.6s ease-out;
        }

        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }

        /* ESTILOS PARA C√ìDIGO */
        code {
            font-family: 'Source Code Pro', monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 4px 8px;
            border-radius: 6px;
            color: #64ffda;
            font-size: 14px;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }

        pre code {
            display: block;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
            line-height: 1.6;
            font-size: 14px;
            border-radius: 12px;
            border: 2px solid rgba(100, 255, 218, 0.3);
            background: rgba(0, 0, 0, 0.4);
        }

        /* TOOLTIPS */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(10, 25, 47, 0.95);
            color: white;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 14px;
            width: 250px;
            text-align: center;
            z-index: 1000;
            border: 1px solid rgba(100, 255, 218, 0.3);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 0.3s;
            backdrop-filter: blur(10px);
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .tooltip .tooltip-text::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border-width: 8px;
            border-style: solid;
            border-color: rgba(100, 255, 218, 0.3) transparent transparent transparent;
        }

        /* ===== ESTILOS ADICIONALES PARA NUEVAS FUNCIONALIDADES ===== */
        .game-container {
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, 
                rgba(57, 73, 171, 0.2) 0%, 
                rgba(100, 255, 218, 0.15) 100%);
            border-radius: 25px;
            border: 3px solid rgba(57, 73, 171, 0.3);
            position: relative;
            overflow: hidden;
        }

        .game-container::before {
            content: 'üéÆ JUEGO DID√ÅCTICO';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, 
                #1a237e, 
                #3949ab);
            color: white;
            padding: 12px 25px;
            font-size: 14px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 40px;
            margin-bottom: 30px;
        }

        .game-card {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 2px solid rgba(100, 255, 218, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .game-card:hover {
            transform: scale(1.05);
            border-color: rgba(100, 255, 218, 0.5);
            background: rgba(100, 255, 218, 0.1);
        }

        .game-card.flipped {
            background: rgba(100, 255, 218, 0.2);
            border-color: #64ffda;
        }

        .game-card.matched {
            background: rgba(76, 175, 80, 0.2);
            border-color: var(--success-green);
            cursor: default;
        }

        .game-card .front,
        .game-card .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 18px;
        }

        .game-card .front {
            background: rgba(26, 35, 126, 0.3);
            font-weight: 700;
            color: #64ffda;
            font-size: 32px;
        }

        .game-card .back {
            background: rgba(100, 255, 218, 0.1);
            transform: rotateY(180deg);
            color: white;
            font-size: 20px;
            padding: 20px;
            text-align: center;
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            margin-top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-box {
            text-align: center;
        }

        .stat-box .stat-value {
            font-size: 32px;
            font-weight: 800;
            color: #64ffda;
            display: block;
        }

        .stat-box .stat-label {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
        }

        /* TIMELINE PARA PROCESOS */
        .timeline {
            margin: 40px 0;
            position: relative;
            padding: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background: var(--gradient-accent);
            border-radius: 4px;
        }

        .timeline-item {
            position: relative;
            width: 50%;
            padding: 30px;
            margin-bottom: 30px;
        }

        .timeline-item:nth-child(odd) {
            left: 0;
            text-align: right;
            padding-right: 70px;
        }

        .timeline-item:nth-child(even) {
            left: 50%;
            text-align: left;
            padding-left: 70px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            background: var(--gradient-accent);
            border-radius: 50%;
            border: 4px solid var(--dark-bg);
            box-shadow: 0 0 0 4px rgba(100, 255, 218, 0.3);
        }

        .timeline-item:nth-child(odd)::before {
            right: -10px;
        }

        .timeline-item:nth-child(even)::before {
            left: -10px;
        }

        .timeline-content {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 20px;
            border: 2px solid rgba(100, 255, 218, 0.2);
            position: relative;
        }

        .timeline-content::before {
            content: '';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.05);
            transform: rotate(45deg);
        }

        .timeline-item:nth-child(odd) .timeline-content::before {
            right: -10px;
            border-right: 2px solid rgba(100, 255, 218, 0.2);
            border-top: 2px solid rgba(100, 255, 218, 0.2);
        }

        .timeline-item:nth-child(even) .timeline-content::before {
            left: -10px;
            border-left: 2px solid rgba(100, 255, 218, 0.2);
            border-bottom: 2px solid rgba(100, 255, 218, 0.2);
        }

        .timeline-step {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background: var(--gradient-accent);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 20px;
            border: 4px solid var(--dark-bg);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .timeline-item:nth-child(odd) .timeline-step {
            right: -25px;
        }

        .timeline-item:nth-child(even) .timeline-step {
            left: -25px;
        }

        /* GLOSARIO DE T√âRMINOS */
        .glossary-container {
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, 
                rgba(255, 152, 0, 0.1) 0%, 
                rgba(255, 87, 34, 0.05) 100%);
            border-radius: 25px;
            border: 3px solid rgba(255, 152, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .glossary-container::before {
            content: 'üìö GLOSARIO DE T√âRMINOS';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, 
                var(--warning-orange), 
                #ff5722);
            color: white;
            padding: 12px 25px;
            font-size: 14px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .glossary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .glossary-term {
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 2px solid rgba(255, 152, 0, 0.2);
            transition: var(--transition);
        }

        .glossary-term:hover {
            transform: translateY(-5px);
            border-color: var(--warning-orange);
            background: rgba(255, 152, 0, 0.1);
        }

        .glossary-term h4 {
            color: var(--warning-orange);
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: 700;
            border-bottom: 2px solid rgba(255, 152, 0, 0.3);
            padding-bottom: 10px;
        }

        .glossary-term p {
            color: #e6f1ff;
            font-size: 15px;
            line-height: 1.7;
        }

        /* COMPARADOR DE MATERIALES */
        .comparator-container {
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, 
                rgba(76, 175, 80, 0.1) 0%, 
                rgba(46, 125, 50, 0.05) 100%);
            border-radius: 25px;
            border: 3px solid rgba(76, 175, 80, 0.3);
            position: relative;
            overflow: hidden;
        }

        .comparator-container::before {
            content: '‚öñÔ∏è COMPARADOR DE MATERIALES';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: var(--gradient-success);
            color: white;
            padding: 12px 25px;
            font-size: 14px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .comparator-selector {
            display: flex;
            gap: 20px;
            margin-top: 40px;
            margin-bottom: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .material-select {
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(76, 175, 80, 0.3);
            border-radius: 15px;
            color: #e6f1ff;
            font-size: 16px;
            min-width: 200px;
            cursor: pointer;
            transition: var(--transition);
        }

        .material-select:focus {
            border-color: var(--success-green);
            background: rgba(76, 175, 80, 0.1);
        }

        .comparison-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .comparison-item {
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 2px solid rgba(76, 175, 80, 0.2);
            text-align: center;
        }

        .comparison-item h4 {
            color: var(--success-green);
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: 700;
        }

        .comparison-value {
            font-size: 36px;
            font-weight: 800;
            color: #64ffda;
            margin: 15px 0;
            text-shadow: 0 4px 15px rgba(100, 255, 218, 0.3);
        }

        .comparison-unit {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* C√ÅLCULADORA CIENT√çFICA */
        .calculator-container {
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, 
                rgba(57, 73, 171, 0.2) 0%, 
                rgba(100, 255, 218, 0.15) 100%);
            border-radius: 25px;
            border: 3px solid rgba(57, 73, 171, 0.3);
            position: relative;
            overflow: hidden;
        }

        .calculator-container::before {
            content: 'üßÆ CALCULADORA CIENT√çFICA';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: var(--gradient-primary);
            color: white;
            padding: 12px 25px;
            font-size: 14px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .calculator-display {
            margin-top: 40px;
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            border: 2px solid rgba(100, 255, 218, 0.3);
            text-align: right;
            font-size: 24px;
            font-family: 'Source Code Pro', monospace;
            color: #64ffda;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            overflow-x: auto;
        }

        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .calc-btn {
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(100, 255, 218, 0.2);
            border-radius: 15px;
            color: #e6f1ff;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calc-btn:hover {
            background: rgba(100, 255, 218, 0.2);
            transform: translateY(-3px);
            border-color: #64ffda;
        }

        .calc-btn.operation {
            background: rgba(57, 73, 171, 0.3);
            border-color: rgba(57, 73, 171, 0.5);
        }

        .calc-btn.equals {
            background: var(--gradient-accent);
            border-color: transparent;
            color: white;
        }

        .calc-btn.clear {
            background: rgba(244, 67, 54, 0.3);
            border-color: rgba(244, 67, 54, 0.5);
        }

        /* PROGRESS TRACKING */
        .progress-container {
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, 
                rgba(255, 152, 0, 0.1) 0%, 
                rgba(255, 87, 34, 0.05) 100%);
            border-radius: 25px;
            border: 3px solid rgba(255, 152, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .progress-container::before {
            content: 'üìä PROGRESO DE APRENDIZAJE';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, 
                var(--warning-orange), 
                #ff5722);
            color: white;
            padding: 12px 25px;
            font-size: 14px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .progress-tracks {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }

        .progress-track {
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 2px solid rgba(255, 152, 0, 0.2);
        }

        .track-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .track-title {
            color: var(--warning-orange);
            font-size: 18px;
            font-weight: 700;
        }

        .track-progress {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .track-progress-fill {
            height: 100%;
            background: var(--gradient-warning);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .track-stats {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        .track-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(255, 152, 0, 0.2);
            border-radius: 20px;
            color: var(--warning-orange);
            font-size: 12px;
            font-weight: 600;
            margin-top: 15px;
        }

        /* HELP SYSTEM */
        .help-container {
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, 
                rgba(100, 255, 218, 0.1) 0%, 
                rgba(57, 73, 171, 0.05) 100%);
            border-radius: 25px;
            border: 3px solid rgba(100, 255, 218, 0.3);
            position: relative;
            overflow: hidden;
        }

        .help-container::before {
            content: '‚ùì SISTEMA DE AYUDA';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: var(--gradient-accent);
            color: white;
            padding: 12px 25px;
            font-size: 14px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .help-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }

        .help-item {
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 2px solid rgba(100, 255, 218, 0.2);
            transition: var(--transition);
            cursor: pointer;
        }

        .help-item:hover {
            transform: translateY(-5px);
            border-color: #64ffda;
            background: rgba(100, 255, 218, 0.1);
        }

        .help-icon {
            font-size: 40px;
            color: #64ffda;
            margin-bottom: 20px;
            text-align: center;
        }

        .help-item h4 {
            color: #64ffda;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: 700;
            text-align: center;
        }

        .help-item p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            line-height: 1.6;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- BOT√ìN MEN√ö M√ìVIL -->
    <div class="mobile-menu-toggle" onclick="toggleSidebar()">
        <i class="material-icons">menu</i>
    </div>

    <!-- MODAL DE CONFIGURACI√ìN -->
    <div class="modal-overlay" id="configModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è Configuraci√≥n del ChatBot</h2>
                <button class="modal-close" onclick="closeModal('configModal')">
                    <i class="material-icons">close</i>
                </button>
            </div>
            <div class="modal-body">
                <h3>üé® Personalizaci√≥n de la Interfaz</h3>
                <div class="modal-option">
                    <label for="themeSelect">Tema de Color</label>
                    <select id="themeSelect" onchange="changeTheme(this.value)">
                        <option value="dark">Oscuro Cient√≠fico</option>
                        <option value="light">Claro Minimalista</option>
                        <option value="blue">Azul Profundo</option>
                        <option value="green">Verde UNALM</option>
                    </select>
                </div>
                <div class="modal-option">
                    <label for="fontSize">Tama√±o de Fuente</label>
                    <input type="range" id="fontSize" min="12" max="20" value="16" onchange="changeFontSize(this.value)">
                </div>
                <div class="modal-option">
                    <label for="animations">Animaciones</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="animations" checked onchange="toggleAnimations(this.checked)">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                
                <h3>ü§ñ Comportamiento del ChatBot</h3>
                <div class="modal-option">
                    <label for="responseSpeed">Velocidad de Respuesta</label>
                    <select id="responseSpeed">
                        <option value="fast">R√°pido</option>
                        <option value="normal" selected>Normal</option>
                        <option value="slow">Lento (simulaci√≥n humana)</option>
                    </select>
                </div>
                <div class="modal-option">
                    <label for="detailLevel">Nivel de Detalle</label>
                    <select id="detailLevel">
                        <option value="basic">B√°sico</option>
                        <option value="normal" selected>Normal</option>
                        <option value="advanced">Avanzado</option>
                        <option value="expert">Experto</option>
                    </select>
                </div>
                
                <h3>üéì Configuraci√≥n Educativa</h3>
                <div class="modal-option">
                    <label for="showExercises">Mostrar Ejercicios Autom√°ticamente</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="showExercises" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="modal-option">
                    <label for="showQuizzes">Mostrar Tests de Conocimiento</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="showQuizzes" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="modal-option">
                    <label for="difficultyLevel">Nivel de Dificultad</label>
                    <select id="difficultyLevel">
                        <option value="beginner">Principiante</option>
                        <option value="intermediate" selected>Intermedio</option>
                        <option value="advanced">Avanzado</option>
                        <option value="university">Universitario</option>
                    </select>
                </div>
            </div>
            <div class="modal-actions">
                <button class="modal-btn secondary" onclick="closeModal('configModal')">Cancelar</button>
                <button class="modal-btn primary" onclick="saveSettings()">Guardar Cambios</button>
            </div>
        </div>
    </div>

    <!-- MODAL DE AYUDA -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ùì Sistema de Ayuda Completo</h2>
                <button class="modal-close" onclick="closeModal('helpModal')">
                    <i class="material-icons">close</i>
                </button>
            </div>
            <div class="modal-body">
                <h3>üéØ C√≥mo Usar el ChatBot</h3>
                <p>Este ChatBot educativo est√° dise√±ado para ayudarte en el estudio de <strong>Temperatura y Calor</strong>. Aqu√≠ tienes todas las formas de interactuar:</p>
                
                <div class="help-grid">
                    <div class="help-item">
                        <div class="help-icon">ü§ñ</div>
                        <h4>Chat Principal</h4>
                        <p>Escribe cualquier pregunta sobre temperatura, calor, dilataci√≥n, etc. El bot responder√° con explicaciones detalladas.</p>
                    </div>
                    <div class="help-item">
                        <div class="help-icon">üìö</div>
                        <h4>Men√∫ Lateral</h4>
                        <p>Accede a todos los temas organizados: teor√≠a, f√≥rmulas, ejercicios, tablas de datos y configuraciones.</p>
                    </div>
                    <div class="help-item">
                        <div class="help-icon">üßÆ</div>
                        <h4>Ejercicios Resueltos</h4>
                        <p>Encuentra ejercicios paso a paso con explicaciones detalladas de cada c√°lculo.</p>
                    </div>
                    <div class="help-item">
                        <div class="help-icon">üìà</div>
                        <h4>Herramientas Interactivas</h4>
                        <p>Usa simulaciones, calculadora cient√≠fica, juegos educativos y tests de conocimiento.</p>
                    </div>
                </div>
                
                <h3>üîç Consejos para Mejor Aprendizaje</h3>
                <div class="exercise-box">
                    <div class="exercise-step">
                        <strong>1. Comienza con la teor√≠a</strong><br>
                        Antes de hacer ejercicios, revisa los conceptos fundamentales en el men√∫ lateral.
                    </div>
                    <div class="exercise-step">
                        <strong>2. Practica con ejercicios</strong><br>
                        Usa los ejercicios resueltos como gu√≠a y luego intenta resolver problemas similares.
                    </div>
                    <div class="exercise-step">
                        <strong>3. Usa las herramientas</strong><br>
                        Las simulaciones y calculadoras te ayudan a visualizar conceptos abstractos.
                    </div>
                    <div class="exercise-step">
                        <strong>4. Eval√∫a tu progreso</strong><br>
                        Realiza los tests de conocimiento para identificar √°reas que necesitan m√°s estudio.
                    </div>
                </div>
                
                <h3>üéì Informaci√≥n del Curso</h3>
                <div class="note-box">
                    <strong>Curso:</strong> F√≠sica General - Nivelaci√≥n 2025-II<br>
                    <strong>Universidad:</strong> Nacional Agraria La Molina (UNALM)<br>
                    <strong>Docente:</strong> Julio Cesar Chapo√±an Sandoval<br>
                    <strong>Departamento:</strong> F√≠sica y Meteorolog√≠a<br>
                    <strong>Contacto:</strong> jchapanan@lamolina.edu.pe
                </div>
                
                <h3>üìû Soporte T√©cnico</h3>
                <p>Si encuentras errores o tienes sugerencias para mejorar el sistema:</p>
                <ul>
                    <li>Revisa la configuraci√≥n del navegador (JavaScript debe estar activado)</li>
                    <li>Actualiza la p√°gina si alguna funci√≥n no responde</li>
                    <li>Usa el bot√≥n "Limpiar Chat" si hay problemas de visualizaci√≥n</li>
                    <li>Para problemas persistentes, contacta al docente del curso</li>
                </ul>
            </div>
            <div class="modal-actions">
                <button class="modal-btn primary" onclick="closeModal('helpModal')">Entendido</button>
            </div>
        </div>
    </div>

    <div class="main-container">
        <!-- PANEL LATERAL EXPANDIDO -->
        <aside class="sidebar" id="sidebar">
            <div class="university-header">
                <div class="logo">
                    <i class="material-icons">science</i>
                </div>
                <h2>UNIVERSIDAD NACIONAL AGRARIA LA MOLINA</h2>
                <p>Facultad de Ciencias - Departamento de F√≠sica y Meteorolog√≠a</p>
                <p style="margin-top: 10px; font-size: 12px; color: #64ffda;">Curso: F√≠sica General - Nivelaci√≥n 2025 II</p>
            </div>
            
            <!-- SISTEMA DE B√öSQUEDA -->
            <div class="search-container">
                <div class="search-box">
                    <i class="material-icons">search</i>
                    <input type="text" id="searchInput" placeholder="Buscar tema, f√≥rmula, ejercicio..." 
                           oninput="searchTopics(this.value)" 
                           onfocus="showSearchResults()">
                </div>
                <div class="search-results" id="searchResults"></div>
            </div>
            
            <div class="teacher-info">
                <h3><i class="material-icons">school</i> Docente del Curso</h3>
                <p><strong>Julio Cesar Chapo√±an Sandoval</strong></p>
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="material-icons">email</i>
                        <span>jchapanan@lamolina.edu.pe</span>
                    </div>
                    <div class="contact-item">
                        <i class="material-icons">calendar_today</i>
                        <span>Horario: Lunes y Mi√©rcoles 8:00-10:00</span>
                    </div>
                    <div class="contact-item">
                        <i class="material-icons">location_on</i>
                        <span>Laboratorio de F√≠sica, Pabell√≥n D</span>
                    </div>
                </div>
            </div>
            
            <div class="nav-section">
                <div class="nav-title">
                    <i class="material-icons">dashboard</i>
                    TEMAS PRINCIPALES
                </div>
                <ul class="nav-list">
                    <li class="nav-item"><a href="#temperatura" class="nav-link active" onclick="showTopic('temperatura')">
                        <i class="material-icons">thermostat</i>Temperatura
                        <span class="badge">Fundamental</span>
                    </a></li>
                    <li class="nav-item"><a href="#calor" class="nav-link" onclick="showTopic('calor')">
                        <i class="material-icons">whatshot</i>Calor
                        <span class="badge">Transferencia</span>
                    </a></li>
                    <li class="nav-item"><a href="#dilatacion" class="nav-link" onclick="showTopic('dilatacion')">
                        <i class="material-icons">straighten</i>Dilataci√≥n T√©rmica
                        <span class="badge">Aplicaciones</span>
                    </a></li>
                    <li class="nav-item"><a href="#calor-especifico" class="nav-link" onclick="showTopic('calor-especifico')">
                        <i class="material-icons">science</i>Calor Espec√≠fico
                        <span class="badge">Tablas</span>
                    </a></li>
                    <li class="nav-item"><a href="#calor-latente" class="nav-link" onclick="showTopic('calor-latente')">
                        <i class="material-icons">ac_unit</i>Calor Latente
                        <span class="badge">Cambios de Fase</span>
                    </a></li>
                    <li class="nav-item"><a href="#calorimetria" class="nav-link" onclick="showTopic('calorimetria')">
                        <i class="material-icons">calculate</i>Calorimetr√≠a
                        <span class="badge">Medici√≥n</span>
                    </a></li>
                    <li class="nav-item"><a href="#transferencia-calor" class="nav-link" onclick="showTopic('transferencia-calor')">
                        <i class="material-icons">swap_vert</i>Transferencia de Calor
                        <span class="badge">3 Mecanismos</span>
                    </a></li>
                </ul>
            </div>
            
            <div class="nav-section">
                <div class="nav-title">
                    <i class="material-icons">functions</i>
                    F√ìRMULAS MATEM√ÅTICAS
                </div>
                <ul class="nav-list">
                    <li class="nav-item"><a href="#formula-dilatacion" class="nav-link" onclick="showTopic('formula-dilatacion')">
                        <i class="material-icons">straighten</i>Dilataci√≥n Lineal
                        <span class="badge">ŒîL = Œ±L‚ÇÄŒîT</span>
                    </a></li>
                    <li class="nav-item"><a href="#formula-calor" class="nav-link" onclick="showTopic('formula-calor')">
                        <i class="material-icons">whatshot</i>Calor Espec√≠fico
                        <span class="badge">Q = mcŒîT</span>
                    </a></li>
                    <li class="nav-item"><a href="#formula-latente" class="nav-link" onclick="showTopic('formula-latente')">
                        <i class="material-icons">ac_unit</i>Calor Latente
                        <span class="badge">Q = mL</span>
                    </a></li>
                    <li class="nav-item"><a href="#formula-conservacion" class="nav-link" onclick="showTopic('formula-conservacion')">
                        <i class="material-icons">balance</i>Conservaci√≥n de Energ√≠a
                        <span class="badge">‚àëQ = 0</span>
                    </a></li>
                    <li class="nav-item"><a href="#formula-fourier" class="nav-link" onclick="showTopic('formula-fourier')">
                        <i class="material-icons">trending_up</i>Ley de Fourier
                        <span class="badge">Q/Œît = -kA(ŒîT/Œîx)</span>
                    </a></li>
                    <li class="nav-item"><a href="#formula-stefan" class="nav-link" onclick="showTopic('formula-stefan')">
                        <i class="material-icons">brightness_5</i>Ley de Stefan-Boltzmann
                        <span class="badge">P = ŒµœÉAT‚Å¥</span>
                    </a></li>
                </ul>
            </div>
            
            <div class="nav-section">
                <div class="nav-title">
                    <i class="material-icons">assignment</i>
                    EJERCICIOS RESUELTOS
                </div>
                <ul class="nav-list">
                    <li class="nav-item"><a href="#ejercicio-aluminio" class="nav-link" onclick="showTopic('ejercicio-aluminio')">
                        <i class="material-icons">calculate</i>Calor en Aluminio
                        <span class="badge">3 kg</span>
                    </a></li>
                    <li class="nav-item"><a href="#ejercicio-agua-vapor" class="nav-link" onclick="showTopic('ejercicio-agua-vapor')">
                        <i class="material-icons">calculate</i>Agua a Vapor
                        <span class="badge">0.5 kg</span>
                    </a></li>
                    <li class="nav-item"><a href="#ejercicio-calorimetria" class="nav-link" onclick="showTopic('ejercicio-calorimetria')">
                        <i class="material-icons">calculate</i>Calorimetr√≠a
                        <span class="badge">Mezcla</span>
                    </a></li>
                    <li class="nav-item"><a href="#ejercicio-dilatacion" class="nav-link" onclick="showTopic('ejercicio-dilatacion')">
                        <i class="material-icons">calculate</i>Dilataci√≥n
                        <span class="badge">Varilla</span>
                    </a></li>
                    <li class="nav-item"><a href="#ejercicio-transferencia" class="nav-link" onclick="showTopic('ejercicio-transferencia')">
                        <i class="material-icons">calculate</i>Transferencia
                        <span class="badge">Pared</span>
                    </a></li>
                    <li class="nav-item"><a href="#ejercicio-equilibrio" class="nav-link" onclick="showTopic('ejercicio-equilibrio')">
                        <i class="material-icons">calculate</i>Equilibrio T√©rmico
                        <span class="badge">3 sustancias</span>
                    </a></li>
                </ul>
            </div>
            
            <div class="nav-section">
                <div class="nav-title">
                    <i class="material-icons">auto_awesome</i>
                    HERRAMIENTAS INTERACTIVAS
                </div>
                <div class="quick-actions">
                    <button class="quick-btn" onclick="showSimulation('dilatacion-sim')">
                        <i class="material-icons">play_circle</i>
                        Simulaci√≥n
                    </button>
                    <button class="quick-btn" onclick="showCalculator()">
                        <i class="material-icons">calculate</i>
                        Calculadora
                    </button>
                    <button class="quick-btn" onclick="startQuiz()">
                        <i class="material-icons">quiz</i>
                        Test
                    </button>
                    <button class="quick-btn" onclick="showGame()">
                        <i class="material-icons">sports_esports</i>
                        Juego
                    </button>
                    <button class="quick-btn" onclick="showGlossary()">
                        <i class="material-icons">menu_book</i>
                        Glosario
                    </button>
                    <button class="quick-btn" onclick="showComparator()">
                        <i class="material-icons">compare</i>
                        Comparador
                    </button>
                </div>
            </div>
            
            <div class="nav-section">
                <div class="nav-title">
                    <i class="material-icons">table_chart</i>
                    TABLAS DE DATOS
                </div>
                <div class="quick-actions">
                    <button class="quick-btn" onclick="showTopic('tabla-calores-especificos')">
                        <i class="material-icons">thermostat</i>Calores Espec√≠ficos
                    </button>
                    <button class="quick-btn" onclick="showTopic('tabla-calores-latentes')">
                        <i class="material-icons">water</i>Calores Latentes
                    </button>
                    <button class="quick-btn" onclick="showTopic('tabla-dilatacion')">
                        <i class="material-icons">expand</i>Coef. Dilataci√≥n
                    </button>
                    <button class="quick-btn" onclick="showTopic('tabla-conductividad')">
                        <i class="material-icons">swap_vert</i>Conductividad
                    </button>
                </div>
            </div>
            
            <div class="nav-section">
                <div class="nav-title">
                    <i class="material-icons">settings</i>
                    CONFIGURACI√ìN
                </div>
                <ul class="nav-list">
                    <li class="nav-item"><a href="#" class="nav-link" onclick="clearChat()">
                        <i class="material-icons">delete_sweep</i>Limpiar Chat
                    </a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="showModal('configModal')">
                        <i class="material-icons">tune</i>Configuraci√≥n
                    </a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="showModal('helpModal')">
                        <i class="material-icons">help</i>Ayuda Completa
                    </a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="exportChat()">
                        <i class="material-icons">download</i>Exportar Chat
                    </a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="printChat()">
                        <i class="material-icons">print</i>Imprimir
                    </a></li>
                </ul>
            </div>
            
            <div class="progress-track" style="margin-top: 30px; padding: 20px; background: rgba(100, 255, 218, 0.1); border-radius: 15px; border: 1px solid rgba(100, 255, 218, 0.3);">
                <h4 style="color: #64ffda; margin-bottom: 15px; font-size: 16px;">üìä Tu Progreso</h4>
                <div class="progress-bar">
                    <div class="progress-fill" id="globalProgress" style="width: 35%;"></div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 12px; color: rgba(255, 255, 255, 0.7);">
                    <span>35% Completado</span>
                    <span>7/20 Temas</span>
                </div>
            </div>
        </aside>
        
        <!-- √ÅREA PRINCIPAL DEL CHAT MEJORADA -->
        <main class="chat-area">
            <!-- HEADER DEL CHAT MEJORADO -->
            <header class="chat-header">
                <div class="chat-title">
                    <div class="chat-title-left">
                        <h1>ü§ñ ChatBot de F√≠sica General - UNALM</h1>
                        <div class="bot-badge floating">
                            <i class="material-icons">verified</i>
                            ASISTENTE UNIVERSITARIO AVANZADO
                        </div>
                    </div>
                    <div class="chat-stats">
                        <div class="stat-item">
                            <i class="material-icons">menu_book</i>
                            <span>Temas: <span class="stat-value" id="topicCount">20</span></span>
                        </div>
                        <div class="stat-item">
                            <i class="material-icons">calculate</i>
                            <span>Ejercicios: <span class="stat-value" id="exerciseCount">15</span></span>
                        </div>
                        <div class="stat-item">
                            <i class="material-icons">schedule</i>
                            <span>Tiempo: <span class="stat-value" id="sessionTime">00:00</span></span>
                        </div>
                    </div>
                </div>
                <div class="chat-subtitle">
                    <span><i class="material-icons">school</i>Temperatura y Calor | Nivel Universitario Avanzado</span>
                    <span class="level-badge">NIVELACI√ìN 2025-II | JULIO CESAR CHAPO√ëAN SANDOVAL</span>
                </div>
            </header>
            
            <!-- CUERPO DEL CHAT -->
            <div class="chat-body" id="chatBody">
                <!-- Los mensajes aparecer√°n aqu√≠ din√°micamente -->
            </div>
            
            <!-- √ÅREA DE INPUT MEJORADA -->
            <div class="input-area">
                <div class="input-container">
                    <input type="text" id="userInput" 
                           placeholder="Escribe tu pregunta sobre f√≠sica... (Ej: 'Explica la dilataci√≥n t√©rmica', 'Resuelve ejercicio de calor latente', 'Tabla de calores espec√≠ficos')" 
                           autocomplete="off" 
                           onkeypress="handleKeyPress(event)">
                    <button id="sendButton" onclick="sendMessage()">
                        <i class="material-icons">send</i> Enviar Mensaje
                    </button>
                </div>
                
                <div class="input-actions">
                    <button class="input-action-btn" onclick="askQuestion('¬øQu√© es la temperatura?')">
                        <i class="material-icons">thermostat</i> Temperatura
                    </button>
                    <button class="input-action-btn" onclick="askQuestion('Diferencia entre calor y temperatura')">
                        <i class="material-icons">compare_arrows</i> Calor vs Temp
                    </button>
                    <button class="input-action-btn" onclick="askQuestion('Calor espec√≠fico del cobre')">
                        <i class="material-icons">science</i> Calor Espec√≠fico
                    </button>
                    <button class="input-action-btn" onclick="askQuestion('Ejercicio resuelto de dilataci√≥n')">
                        <i class="material-icons">calculate</i> Ejercicio
                    </button>
                    <button class="input-action-btn" onclick="voiceInput()">
                        <i class="material-icons">mic</i> Voz
                    </button>
                </div>
                
                <div class="quick-question-buttons">
                    <button class="quick-question" onclick="askQuestion('Explica la ley cero de la termodin√°mica')">
                        <i class="material-icons">balance</i> Ley Cero
                    </button>
                    <button class="quick-question" onclick="askQuestion('¬øC√≥mo se mide el calor?')">
                        <i class="material-icons">thermostat_auto</i> Medici√≥n Calor
                    </button>
                    <button class="quick-question" onclick="askQuestion('Tabla de calores latentes')">
                        <i class="material-icons">water</i> Calores Latentes
                    </button>
                    <button class="quick-question" onclick="askQuestion('Ejercicio de calorimetr√≠a resuelto')">
                        <i class="material-icons">calculate</i> Calorimetr√≠a
                    </button>
                    <button class="quick-question" onclick="askQuestion('Transferencia de calor por convecci√≥n')">
                        <i class="material-icons">swap_vert</i> Convecci√≥n
                    </button>
                </div>
            </div>
            
            <!-- FOOTER MEJORADO -->
            <footer class="chat-footer">
                <p>¬© 2024 Universidad Nacional Agraria La Molina - Departamento de F√≠sica y Meteorolog√≠a | ChatBot educativo avanzado para F√≠sica General - Temperatura y Calor</p>
                <div class="footer-links">
                    <a href="#" class="footer-link" onclick="showTopic('creditos')">
                        <i class="material-icons">info</i> Cr√©ditos
                    </a>
                    <a href="#" class="footer-link" onclick="showTopic('bibliografia')">
                        <i class="material-icons">library_books</i> Bibliograf√≠a
                    </a>
                    <a href="#" class="footer-link" onclick="showTopic('referencias')">
                        <i class="material-icons">link</i> Referencias
                    </a>
                    <a href="#" class="footer-link" onclick="showTopic('actualizaciones')">
                        <i class="material-icons">update</i> Actualizaciones
                    </a>
                </div>
            </footer>
        </main>
    </div>

    <!-- NOTIFICACIONES -->
    <div class="notification" id="notification">
        <div class="notification-content">
            <div class="notification-icon">
                <i class="material-icons">info</i>
            </div>
            <div class="notification-message">
                <h4 id="notificationTitle">Notificaci√≥n</h4>
                <p id="notificationText">Mensaje de notificaci√≥n</p>
            </div>
        </div>
    </div>

    <!-- SCRIPT PRINCIPAL EXPANDIDO (m√°s de 5000 l√≠neas de c√≥digo) -->
    <script>
        // ===== VARIABLES GLOBALES EXPANDIDAS =====
        const chatBody = document.getElementById('chatBody');
        const userInput = document.getElementById('userInput');
        const notification = document.getElementById('notification');
        const searchResults = document.getElementById('searchResults');
        let sessionStartTime = new Date();
        let messageCount = 0;
        let correctAnswers = 0;
        let totalQuestions = 0;
        let currentQuiz = null;
        let simulationActive = false;
        let currentGame = null;
        let voiceRecognition = null;

        // ===== BASE DE CONOCIMIENTO COMPLETAMENTE EXPANDIDA =====
        const knowledgeBase = {
            // TEMPERATURA (Expandido)
            'temperatura': {
                title: 'üå°Ô∏è TEMPERATURA - Concepto F√≠sico Fundamental',
                content: `
                    <h2>DEFINICI√ìN CIENT√çFICA DE TEMPERATURA</h2>
                    
                    <p>La <span class="highlight">temperatura</span> es una magnitud f√≠sica escalar que cuantifica la sensaci√≥n t√©rmica de fr√≠o o calor de un cuerpo, 
                    pero desde el punto de vista cient√≠fico es mucho m√°s que eso.</p>
                    
                    <div class="formula-box mathjax">
                        \\[ T \\propto \\langle E_k \\rangle \\]
                        Donde: \\( T \\) = Temperatura, \\( \\langle E_k \\rangle \\) = Energ√≠a cin√©tica promedio por part√≠cula
                    </div>
                    
                    <h3>üìä CARACTER√çSTICAS FUNDAMENTALES</h3>
                    <ul>
                        <li><span class="highlight">Propiedad intensiva:</span> No depende de la cantidad de materia del sistema</li>
                        <li><span class="highlight">Variable de estado:</span> Caracteriza el estado t√©rmico de un sistema termodin√°mico</li>
                        <li><span class="highlight">Direccionalidad del calor:</span> Determina la direcci√≥n natural del flujo de calor</li>
                        <li><span class="highlight">Equilibrio t√©rmico:</span> Dos cuerpos en contacto t√©rmico alcanzan igual temperatura</li>
                    </ul>
                    
                    <div class="note-box">
                        <strong>üí° DATO IMPORTANTE:</strong><br>
                        La temperatura NO es energ√≠a. Es una medida de la energ√≠a cin√©tica promedio de las part√≠culas, 
                        pero no representa la energ√≠a total del sistema. Un vaso peque√±o de agua a 90¬∞C tiene menos energ√≠a t√©rmica 
                        que una ba√±era llena de agua a 40¬∞C.
                    </div>
                    
                    <h3>‚öõÔ∏è INTERPRETACI√ìN MICROSC√ìPICA</h3>
                    <p>A nivel molecular, la temperatura est√° relacionada con el movimiento desordenado de las part√≠culas:</p>
                    
                    <div class="exercise-box">
                        <strong>Para un gas ideal monoat√≥mico:</strong>
                        <div class="formula-box mathjax">
                            \\[ \\langle E_k \\rangle = \\frac{3}{2} k_B T \\]
                            Donde \\( k_B = 1.380649 \\times 10^{-23} \\, \\text{J/K} \\) (Constante de Boltzmann)
                        </div>
                        
                        <strong>Para s√≥lidos (Teor√≠a de Debye):</strong>
                        <div class="formula-box mathjax">
                            \\[ C_V = 9Nk_B \\left( \\frac{T}{\\Theta_D} \\right)^3 \\int_0^{\\Theta_D/T} \\frac{x^4 e^x}{(e^x - 1)^2} dx \\]
                            Donde \\( \\Theta_D \\) es la temperatura de Debye caracter√≠stica del material
                        </div>
                    </div>
                    
                    <h3>üéØ DIFERENCIA CONCEPTUAL CLAVE</h3>
                    <div class="comparator-container">
                        <div class="comparison-results">
                            <div class="comparison-item">
                                <h4>ENERG√çA T√âRMICA</h4>
                                <div class="comparison-value">U</div>
                                <div class="comparison-unit">Julios (J)</div>
                                <p>Energ√≠a total del sistema asociada al movimiento molecular</p>
                            </div>
                            <div class="comparison-item">
                                <h4>TEMPERATURA</h4>
                                <div class="comparison-value">T</div>
                                <div class="comparison-unit">Kelvin (K)</div>
                                <p>Medida de la energ√≠a cin√©tica promedio por part√≠cula</p>
                            </div>
                            <div class="comparison-item">
                                <h4>CALOR</h4>
                                <div class="comparison-value">Q</div>
                                <div class="comparison-unit">Julios (J)</div>
                                <p>Energ√≠a en tr√°nsito debido a diferencia de temperatura</p>
                            </div>
                        </div>
                    </div>
                    
                    <h3>üìà ESCALAS TERMOM√âTRICAS (Completo)</h3>
                    <table class="material-table">
                        <thead>
                            <tr>
                                <th>Escala</th>
                                <th>S√≠mbolo</th>
                                <th>Punto Cero Absoluto</th>
                                <th>Punto Congelaci√≥n Agua</th>
                                <th>Punto Ebullici√≥n Agua</th>
                                <th>Divisi√≥n</th>
                                <th>Uso Principal</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Celsius (Cent√≠grada)</strong></td>
                                <td>¬∞C</td>
                                <td>-273.15 ¬∞C</td>
                                <td>0 ¬∞C</td>
                                <td>100 ¬∞C</td>
                                <td>100 partes</td>
                                <td>Cient√≠fico (excepto termodin√°mica), vida cotidiana</td>
                            </tr>
                            <tr>
                                <td><strong>Kelvin (Absoluta)</strong></td>
                                <td>K</td>
                                <td>0 K</td>
                                <td>273.15 K</td>
                                <td>373.15 K</td>
                                <td>Misma que Celsius</td>
                                <td>Ciencia, termodin√°mica, SI (obligatoria)</td>
                            </tr>
                            <tr>
                                <td><strong>Fahrenheit</strong></td>
                                <td>¬∞F</td>
                                <td>-459.67 ¬∞F</td>
                                <td>32 ¬∞F</td>
                                <td>212 ¬∞F</td>
                                <td>180 partes</td>
                                <td>EE.UU., algunos pa√≠ses angl√≥fonos</td>
                            </tr>
                            <tr>
                                <td><strong>Rankine</strong></td>
                                <td>¬∞R</td>
                                <td>0 ¬∞R</td>
                                <td>491.67 ¬∞R</td>
                                <td>671.67 ¬∞R</td>
                                <td>Misma que Fahrenheit</td>
                                <td>Ingenier√≠a (EE.UU.), termodin√°mica</td>
                            </tr>
                            <tr>
                                <td><strong>R√©aumur</strong></td>
                                <td>¬∞R√©</td>
                                <td>-218.52 ¬∞R√©</td>
                                <td>0 ¬∞R√©</td>
                                <td>80 ¬∞R√©</td>
                                <td>80 partes</td>
                                <td>Hist√≥rico, alguna industria</td>
                            </tr>
                            <tr>
                                <td><strong>Delisle</strong></td>
                                <td>¬∞De</td>
                                <td>559.725 ¬∞De</td>
                                <td>150 ¬∞De</td>
                                <td>0 ¬∞De</td>
                                <td>Decreciente</td>
                                <td>Hist√≥rico (Rusia siglo XVIII)</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h3>üîÑ F√ìRMULAS DE CONVERSI√ìN COMPLETAS</h3>
                    <div class="calculator-container">
                        <div class="calculator-display" id="tempConversionDisplay">0 ¬∞C = 273.15 K = 32 ¬∞F</div>
                        <div class="calculator-buttons">
                            <div class="calc-btn" onclick="convertTemperature('CtoK')">C‚ÜíK</div>
                            <div class="calc-btn" onclick="convertTemperature('KtoC')">K‚ÜíC</div>
                            <div class="calc-btn" onclick="convertTemperature('CtoF')">C‚ÜíF</div>
                            <div class="calc-btn" onclick="convertTemperature('FtoC')">F‚ÜíC</div>
                            <div class="calc-btn" onclick="convertTemperature('KtoF')">K‚ÜíF</div>
                            <div class="calc-btn" onclick="convertTemperature('FtoK')">F‚ÜíK</div>
                            <div class="calc-btn operation" onclick="clearTempConversion()">C</div>
                            <div class="calc-btn" onclick="addTempDigit('7')">7</div>
                            <div class="calc-btn" onclick="addTempDigit('8')">8</div>
                            <div class="calc-btn" onclick="addTempDigit('9')">9</div>
                            <div class="calc-btn" onclick="addTempDigit('4')">4</div>
                            <div class="calc-btn" onclick="addTempDigit('5')">5</div>
                            <div class="calc-btn" onclick="addTempDigit('6')">6</div>
                            <div class="calc-btn" onclick="addTempDigit('1')">1</div>
                            <div class="calc-btn" onclick="addTempDigit('2')">2</div>
                            <div class="calc-btn" onclick="addTempDigit('3')">3</div>
                            <div class="calc-btn" onclick="addTempDigit('0')">0</div>
                            <div class="calc-btn" onclick="addTempDigit('.')">.</div>
                            <div class="calc-btn equals" onclick="calculateTempConversion()">=</div>
                        </div>
                    </div>
                    
                    <div class="formula-box">
                        <strong>RELACIONES MATEM√ÅTICAS:</strong><br><br>
                        <strong>Celsius ‚Üî Kelvin:</strong> \\( K = ¬∞C + 273.15 \\) &nbsp; &nbsp; \\( ¬∞C = K - 273.15 \\)<br><br>
                        <strong>Celsius ‚Üî Fahrenheit:</strong> \\( ¬∞F = \\frac{9}{5}¬∞C + 32 \\) &nbsp; &nbsp; \\( ¬∞C = \\frac{5}{9}(¬∞F - 32) \\)<br><br>
                        <strong>Kelvin ‚Üî Fahrenheit:</strong> \\( ¬∞F = \\frac{9}{5}(K - 273.15) + 32 \\) &nbsp; &nbsp; \\( K = \\frac{5}{9}(¬∞F - 32) + 273.15 \\)<br><br>
                        <strong>Celsius ‚Üî Rankine:</strong> \\( ¬∞R = \\frac{9}{5}¬∞C + 491.67 \\) &nbsp; &nbsp; \\( ¬∞C = \\frac{5}{9}(¬∞R - 491.67) \\)
                    </div>
                    
                    <h3>üéÆ SIMULACI√ìN: COMPORTAMIENTO MOLECULAR vs TEMPERATURA</h3>
                    <div class="simulation-container">
                        <div class="simulation-controls">
                            <div class="control-group">
                                <label class="control-label">
                                    <i class="material-icons">thermostat</i>
                                    Temperatura (K)
                                </label>
                                <div class="slider-container">
                                    <input type="range" id="tempSimSlider" min="50" max="500" value="300" 
                                           oninput="updateTempSim(this.value)">
                                    <span class="slider-value" id="tempSimValue">300 K</span>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">
                                    <i class="material-icons">speed</i>
                                    Velocidad Promedio
                                </label>
                                <div class="slider-container">
                                    <input type="range" id="speedSimSlider" min="100" max="1000" value="500" 
                                           oninput="updateSpeedSim(this.value)">
                                    <span class="slider-value" id="speedSimValue">500 m/s</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="simulation-display" id="tempSimDisplay">
                            <div style="text-align: center; padding: 20px;">
                                <div style="font-size: 20px; color: #64ffda; margin-bottom: 15px;">
                                    <i class="material-icons">science</i> SIMULACI√ìN MOLECULAR
                                </div>
                                <div style="width: 300px; height: 200px; margin: 0 auto; border: 2px solid rgba(100,255,218,0.3); 
                                     border-radius: 10px; position: relative; overflow: hidden; background: rgba(0,0,0,0.2);">
                                    <!-- Las part√≠culas se generan din√°micamente con JavaScript -->
                                </div>
                                <div style="margin-top: 20px; color: #a0a0ff; font-size: 14px;">
                                    Temperatura: <span id="simTempValue">300 K</span> | 
                                    Energ√≠a cin√©tica promedio: <span id="simEnergyValue">6.21 √ó 10‚Åª¬≤¬π J</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <button class="quiz-action" onclick="startTempSimulation()">
                                <i class="material-icons">play_arrow</i> Iniciar Simulaci√≥n
                            </button>
                            <button class="quiz-action" style="background: rgba(244,67,54,0.8);" 
                                    onclick="stopTempSimulation()">
                                <i class="material-icons">stop</i> Detener
                            </button>
                            <button class="quiz-action" style="background: rgba(76,175,80,0.8);" 
                                    onclick="resetTempSimulation()">
                                <i class="material-icons">replay</i> Reiniciar
                            </button>
                        </div>
                    </div>
                    
                    <h3>üìä DATOS DE TEMPERATURAS EN LA NATURALEZA</h3>
                    <table class="material-table">
                        <thead>
                            <tr>
                                <th>Fen√≥meno/Sistema</th>
                                <th>Temperatura (K)</th>
                                <th>Temperatura (¬∞C)</th>
                                <th>Temperatura (¬∞F)</th>
                                <th>Comentarios Cient√≠ficos</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Cero Absoluto</strong></td>
                                <td class="highlight-cell">0 K</td>
                                <td>-273.15 ¬∞C</td>
                                <td>-459.67 ¬∞F</td>
                                <td>L√≠mite te√≥rico inferior, inalcanzable (Tercera Ley)</td>
                            </tr>
                            <tr>
                                <td><strong>Temperatura m√°s baja lograda</strong></td>
                                <td>100 pK (10‚Åª¬π‚Å∞ K)</td>
                                <td>-273.1499999999 ¬∞C</td>
                                <td>-459.6699999998 ¬∞F</td>
                                <td>Condensado de Bose-Einstein (MIT, 2003)</td>
                            </tr>
                            <tr>
                                <td><strong>Superconductividad de alta Tc</strong></td>
                                <td>138 K</td>
                                <td>-135 ¬∞C</td>
                                <td>-211 ¬∞F</td>
                                <td>HgBa‚ÇÇCa‚ÇÇCu‚ÇÉO‚Çà‚ÇäŒ¥ (r√©cord actual)</td>
                            </tr>
                            <tr>
                                <td><strong>Punto triple del agua</strong></td>
                                <td>273.16 K</td>
                                <td>0.01 ¬∞C</td>
                                <td>32.018 ¬∞F</td>
                                <td>Definici√≥n del kelvin en el SI desde 2019</td>
                            </tr>
                            <tr>
                                <td><strong>Temperatura corporal humana</strong></td>
                                <td>310.15 K</td>
                                <td>37.0 ¬∞C</td>
                                <td>98.6 ¬∞F</td>
                                <td>Valor normal (var√≠a ¬±0.5¬∞C)</td>
                            </tr>
                            <tr>
                                <td><strong>Punto de ebullici√≥n agua (1 atm)</strong></td>
                                <td>373.15 K</td>
                                <td>100.0 ¬∞C</td>
                                <td>212.0 ¬∞F</td>
                                <td>Definici√≥n escala Celsius original</td>
                            </tr>
                            <tr>
                                <td><strong>Superficie solar</strong></td>
                                <td>5778 K</td>
                                <td>5505 ¬∞C</td>
                                <td>9941 ¬∞F</td>
                                <td>Temperatura efectiva (cuerpo negro)</td>
                            </tr>
                            <tr>
                                <td><strong>N√∫cleo solar</strong></td>
                                <td>15.7 √ó 10‚Å∂ K</td>
                                <td>15.7 √ó 10‚Å∂ ¬∞C</td>
                                <td>28.3 √ó 10‚Å∂ ¬∞F</td>
                                <td>Fusi√≥n nuclear (H ‚Üí He)</td>
                            </tr>
                            <tr>
                                <td><strong>Colisi√≥n iones pesados (LHC)</strong></td>
                                <td>5.5 √ó 10¬π¬≤ K</td>
                                <td>5.5 √ó 10¬π¬≤ ¬∞C</td>
                                <td>9.9 √ó 10¬π¬≤ ¬∞F</td>
                                <td>Plasma quark-glu√≥n (r√©cord temperatura)</td>
                            </tr>
                            <tr>
                                <td><strong>Universo temprano (1 s despu√©s Big Bang)</strong></td>
                                <td>10¬π‚Å∞ K</td>
                                <td>10¬π‚Å∞ ¬∞C</td>
                                <td>1.8 √ó 10¬π‚Å∞ ¬∞F</td>
                                <td>S√≠ntesis primordial de nucleones</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h3>üß† TEST DE CONOCIMIENTO: TEMPERATURA</h3>
                    <div class="quiz-container">
                        <div class="quiz-question">
                            <div class="quiz-question-text">
                                1. ¬øCu√°l de las siguientes afirmaciones sobre la temperatura es CORRECTA?
                            </div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'A', 1)">
                                    <div class="quiz-option-letter">A</div>
                                    <div>La temperatura es una medida de la energ√≠a total de un sistema</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'B', 1)">
                                    <div class="quiz-option-letter">B</div>
                                    <div>La temperatura es una propiedad extensiva del sistema</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'C', 1)">
                                    <div class="quiz-option-letter">C</div>
                                    <div>Dos objetos en equilibrio t√©rmico tienen la misma temperatura</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'D', 1)">
                                    <div class="quiz-option-letter">D</div>
                                    <div>La temperatura se mide directamente en julios en el SI</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-question">
                            <div class="quiz-question-text">
                                2. Convierte 25¬∞C a Kelvin y Fahrenheit:
                            </div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'A', 2)">
                                    <div class="quiz-option-letter">A</div>
                                    <div>298 K y 77¬∞F</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'B', 2)">
                                    <div class="quiz-option-letter">B</div>
                                    <div>248 K y 45¬∞F</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'C', 2)">
                                    <div class="quiz-option-letter">C</div>
                                    <div>273 K y 32¬∞F</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'D', 2)">
                                    <div class="quiz-option-letter">D</div>
                                    <div>300 K y 100¬∞F</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-feedback" id="quizFeedback1"></div>
                        <div class="quiz-feedback" id="quizFeedback2"></div>
                        
                        <button class="quiz-action" onclick="showQuizResults()">
                            <i class="material-icons">check_circle</i> Verificar Respuestas
                        </button>
                    </div>
                    
                    <div class="note-box">
                        <strong>üéì RESUMEN CONCEPTUAL:</strong><br>
                        1. La temperatura es una <span class="highlight">propiedad intensiva</span> que mide el estado de agitaci√≥n molecular<br>
                        2. Se mide con term√≥metros y su unidad SI es el <span class="highlight">kelvin (K)</span><br>
                        3. El <span class="highlight">cero absoluto (0 K)</span> es el l√≠mite inferior te√≥rico de temperatura<br>
                        4. La <span class="highlight">Ley Cero de la Termodin√°mica</span> define la temperatura operacionalmente<br>
                        5. En c√°lculos termodin√°micos SIEMPRE se debe usar la <span class="highlight">escala Kelvin</span>
                    </div>
                    
                    <h3>üìö APLICACIONES PR√ÅCTICAS</h3>
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-step">1</div>
                            <div class="timeline-content">
                                <h4>Medicina</h4>
                                <p>Term√≥metros cl√≠nicos (mercurio, digital, infrarrojo), criocirug√≠a, hipertermia terap√©utica</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-step">2</div>
                            <div class="timeline-content">
                                <h4>Industria</h4>
                                <p>Control de procesos, tratamientos t√©rmicos, pir√≥metros, termopares en hornos industriales</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-step">3</div>
                            <div class="timeline-content">
                                <h4>Investigaci√≥n</h4>
                                <p>Criogenia, superconductividad, astrof√≠sica (temperatura estelar), geotermia</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-step">4</div>
                            <div class="timeline-content">
                                <h4>Tecnolog√≠a</h4>
                                <p>Microprocesadores (control t√©rmico), c√°maras t√©rmicas, sat√©lites meteorol√≥gicos</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="progress-container">
                        <h4 style="color: #64ffda; margin-bottom: 20px; text-align: center;">Tu Progreso en este Tema</h4>
                        <div class="progress-tracks">
                            <div class="progress-track">
                                <div class="track-header">
                                    <div class="track-title">Conceptos B√°sicos</div>
                                    <div class="track-badge">
                                        <i class="material-icons" style="font-size: 14px;">check</i>
                                        Completado
                                    </div>
                                </div>
                                <div class="track-progress">
                                    <div class="track-progress-fill" style="width: 100%;"></div>
                                </div>
                                <div class="track-stats">
                                    <span>100%</span>
                                    <span>5/5 conceptos</span>
                                </div>
                            </div>
                            <div class="progress-track">
                                <div class="track-header">
                                    <div class="track-title">Escalas Termom√©tricas</div>
                                    <div class="track-badge">
                                        <i class="material-icons" style="font-size: 14px;">schedule</i>
                                        En Progreso
                                    </div>
                                </div>
                                <div class="track-progress">
                                    <div class="track-progress-fill" style="width: 80%;"></div>
                                </div>
                                <div class="track-stats">
                                    <span>80%</span>
                                    <span>4/5 conversiones</span>
                                </div>
                            </div>
                            <div class="progress-track">
                                <div class="track-header">
                                    <div class="track-title">Aplicaciones</div>
                                    <div class="track-badge">
                                        <i class="material-icons" style="font-size: 14px;">play_arrow</i>
                                        Por Comenzar
                                    </div>
                                </div>
                                <div class="track-progress">
                                    <div class="track-progress-fill" style="width: 30%;"></div>
                                </div>
                                <div class="track-stats">
                                    <span>30%</span>
                                    <span>3/10 aplicaciones</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            
            // CALOR (Expandido)
            'calor': {
                title: 'üî• CALOR - Transferencia de Energ√≠a T√©rmica',
                content: `
                    <h2>DEFINICI√ìN CIENT√çFICA DE CALOR</h2>
                    
                    <p>El <span class="highlight">calor</span> es la <strong>energ√≠a en tr√°nsito</strong> que se transfiere 
                    de un sistema a otro debido exclusivamente a una diferencia de temperatura entre ellos.</p>
                    
                    <div class="note-box">
                        <strong>‚ö° CARACTER√çSTICA FUNDAMENTAL:</strong><br>
                        El calor NO es una propiedad del sistema. Solo existe durante el proceso de transferencia 
                        y desaparece una vez que se alcanza el equilibrio t√©rmico. Es un <strong>proceso</strong>, no un estado.
                    </div>
                    
                    <div class="formula-box mathjax">
                        \\[ Q = \\Delta U + W \\]
                        <strong>Primera Ley de la Termodin√°mica:</strong><br>
                        Donde: \\( Q \\) = Calor transferido, \\( \\Delta U \\) = Cambio en energ√≠a interna, \\( W \\) = Trabajo realizado
                    </div>
                    
                    <h3>üìù CARACTER√çSTICAS PRINCIPALES</h3>
                    <table class="material-table">
                        <thead>
                            <tr>
                                <th>Aspecto</th>
                                <th>Descripci√≥n</th>
                                <th>Implicaciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Naturaleza</strong></td>
                                <td>Proceso de transferencia (no es propiedad)</td>
                                <td>No se "tiene" calor, se "transfiere" calor</td>
                            </tr>
                            <tr>
                                <td><strong>Direcci√≥n natural</strong></td>
                                <td>Siempre de mayor a menor temperatura</td>
                                <td>Segunda Ley de la Termodin√°mica</td>
                            </tr>
                            <tr>
                                <td><strong>Unidades SI</strong></td>
                                <td>Julio (J) = N¬∑m = kg¬∑m¬≤/s¬≤</td>
                                <td>Equivalente mec√°nico: 1 cal = 4.186 J</td>
                            </tr>
                            <tr>
                                <td><strong>Unidades tradicionales</strong></td>
                                <td>Calor√≠a (cal), kilocalor√≠a (kcal), BTU</td>
                                <td>1 kcal = 1000 cal = 4186 J</td>
                            </tr>
                            <tr>
                                <td><strong>Signo convencional</strong></td>
                                <td>Q > 0: Sistema recibe calor<br>Q < 0: Sistema cede calor</td>
                                <td>Convenci√≥n termodin√°mica</td>
                            </tr>
                            <tr>
                                <td><strong>Medici√≥n</strong></td>
                                <td>Calor√≠metro (principio de conservaci√≥n)</td>
                                <td>Basado en cambio de temperatura</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h3>üéØ DIFERENCIA FUNDAMENTAL: CALOR vs TEMPERATURA</h3>
                    <div class="comparator-container">
                        <div class="comparison-results">
                            <div class="comparison-item">
                                <h4>CALOR (Q)</h4>
                                <div class="comparison-value">Energ√≠a</div>
                                <div class="comparison-unit">Julios (J)</div>
                                <ul style="text-align: left; margin-top: 10px; font-size: 14px;">
                                    <li>Energ√≠a en tr√°nsito</li>
                                    <li>Proceso, no estado</li>
                                    <li>Propiedad extensiva</li>
                                    <li>Depende de la masa</li>
                                    <li>Medido con calor√≠metro</li>
                                </ul>
                            </div>
                            <div class="comparison-item">
                                <h4>TEMPERATURA (T)</h4>
                                <div class="comparison-value">Medida</div>
                                <div class="comparison-unit">Kelvin (K)</div>
                                <ul style="text-align: left; margin-top: 10px; font-size: 14px;">
                                    <li>Medida de agitaci√≥n molecular</li>
                                    <li>Propiedad del sistema</li>
                                    <li>Propiedad intensiva</li>
                                    <li>No depende de la masa</li>
                                    <li>Medido con term√≥metro</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="exercise-box">
                        <h4>üí≠ EJEMPLO CONCEPTUAL ILUSTRATIVO</h4>
                        <p><strong>Sistema A:</strong> Taza peque√±a de caf√© (200 ml) a 90¬∞C</p>
                        <p><strong>Sistema B:</strong> Ba√±era con agua (200 litros) a 40¬∞C</p>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">1</div>
                            <strong>Temperatura:</strong><br>
                            ‚Ä¢ Sistema A: Alta (90¬∞C)<br>
                            ‚Ä¢ Sistema B: Moderada (40¬∞C)<br>
                            ‚Üí El caf√© est√° m√°s caliente
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">2</div>
                            <strong>Calor contenido (energ√≠a t√©rmica):</strong><br>
                            ‚Ä¢ Sistema A: Q ‚âà m¬∑c¬∑ŒîT ‚âà 0.2√ó4186√ó90 ‚âà 75,000 J<br>
                            ‚Ä¢ Sistema B: Q ‚âà 200√ó4186√ó40 ‚âà 33,488,000 J<br>
                            ‚Üí La ba√±era tiene 446 veces m√°s energ√≠a t√©rmica
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">3</div>
                            <strong>Transferencia de calor al ambiente (20¬∞C):</strong><br>
                            ‚Ä¢ Sistema A: ŒîT = 70¬∞C ‚Üí Enfr√≠a r√°pido<br>
                            ‚Ä¢ Sistema B: ŒîT = 20¬∞C ‚Üí Enfr√≠a lento<br>
                            ‚Üí La ba√±era mantiene temperatura por m√°s tiempo
                        </div>
                    </div>
                    
                    <h3>üîÑ EQUILIBRIO T√âRMICO</h3>
                    <p>Cuando dos cuerpos a diferentes temperaturas se ponen en contacto t√©rmico:</p>
                    
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-step">1</div>
                            <div class="timeline-content">
                                <h4>Contacto Inicial</h4>
                                <p>T‚ÇÅ > T‚ÇÇ (existe gradiente de temperatura)<br>Flujo neto de calor: Q‚ÇÅ‚ÇÇ > 0</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-step">2</div>
                            <div class="timeline-content">
                                <h4>Proceso de Transferencia</h4>
                                <p>Cuerpo caliente cede calor (Q‚ÇÅ < 0)<br>Cuerpo fr√≠o recibe calor (Q‚ÇÇ > 0)<br>‚àëQ = Q‚ÇÅ + Q‚ÇÇ = 0</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-step">3</div>
                            <div class="timeline-content">
                                <h4>Equilibrio T√©rmico</h4>
                                <p>T‚ÇÅ = T‚ÇÇ = T<sub>eq</sub><br>Flujo neto de calor: Q = 0<br>No hay m√°s transferencia espont√°nea</p>
                            </div>
                        </div>
                    </div>
                    
                    <h3>üìä UNIDADES DE CALOR Y EQUIVALENCIAS</h3>
                    <table class="material-table">
                        <thead>
                            <tr>
                                <th>Unidad</th>
                                <th>S√≠mbolo</th>
                                <th>Definici√≥n</th>
                                <th>Equivalencia en Julios</th>
                                <th>Equivalencia en Calor√≠as</th>
                                <th>Uso Principal</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Julio</strong></td>
                                <td>J</td>
                                <td>Unidad SI de energ√≠a<br>1 J = 1 N¬∑m = 1 kg¬∑m¬≤/s¬≤</td>
                                <td class="highlight-cell">1 J</td>
                                <td>0.239 cal</td>
                                <td>Sistema Internacional, ciencia</td>
                            </tr>
                            <tr>
                                <td><strong>Calor√≠a termoqu√≠mica</strong></td>
                                <td>cal<sub>th</sub></td>
                                <td>Cantidad de calor para elevar 1 g de agua de 14.5¬∞C a 15.5¬∞C</td>
                                <td>4.184 J</td>
                                <td class="highlight-cell">1 cal</td>
                                <td>Qu√≠mica, bioqu√≠mica</td>
                            </tr>
                            <tr>
                                <td><strong>Calor√≠a Internacional</strong></td>
                                <td>cal<sub>IT</sub></td>
                                <td>1/860 vatios-hora internacionales</td>
                                <td>4.1868 J</td>
                                <td>1 cal<sub>IT</sub></td>
                                <td>Ingenier√≠a (obsoleta)</td>
                            </tr>
                            <tr>
                                <td><strong>Kilocalor√≠a</strong></td>
                                <td>kcal</td>
                                <td>1000 calor√≠as<br>"Calor√≠a" nutricional</td>
                                <td>4186 J</td>
                                <td>1000 cal</td>
                                <td>Nutrici√≥n, alimentos</td>
                            </tr>
                            <tr>
                                <td><strong>BTU (British Thermal Unit)</strong></td>
                                <td>BTU</td>
                                <td>Cantidad de calor para elevar 1 lb de agua 1¬∞F</td>
                                <td>1055.06 J</td>
                                <td>252.16 cal</td>
                                <td>Ingenier√≠a (EE.UU., Reino Unido)</td>
                            </tr>
                            <tr>
                                <td><strong>Termia</strong></td>
                                <td>th</td>
                                <td>100,000 BTU</td>
                                <td>1.055√ó10‚Å∏ J</td>
                                <td>2.52√ó10‚Å∑ cal</td>
                                <td>Industria del gas</td>
                            </tr>
                            <tr>
                                <td><strong>Electr√≥n-voltio</strong></td>
                                <td>eV</td>
                                <td>Energ√≠a cin√©tica ganada por un electr√≥n al acelerarse 1 V</td>
                                <td>1.602√ó10‚Åª¬π‚Åπ J</td>
                                <td>3.83√ó10‚Åª¬≤‚Å∞ cal</td>
                                <td>F√≠sica de part√≠culas, at√≥mica</td>
                            </tr>
                            <tr>
                                <td><strong>Ergio</strong></td>
                                <td>erg</td>
                                <td>Unidad CGS de energ√≠a<br>1 erg = 1 g¬∑cm¬≤/s¬≤</td>
                                <td>10‚Åª‚Å∑ J</td>
                                <td>2.39√ó10‚Åª‚Å∏ cal</td>
                                <td>F√≠sica (sistema CGS)</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h3>üßÆ CONVERSOR DE UNIDADES DE CALOR</h3>
                    <div class="calculator-container">
                        <div class="calculator-display" id="heatConversionDisplay">0 J = 0 cal</div>
                        <div class="calculator-buttons">
                            <div class="calc-btn" onclick="convertHeat('Jtocal')">J‚Üícal</div>
                            <div class="calc-btn" onclick="convertHeat('caltoJ')">cal‚ÜíJ</div>
                            <div class="calc-btn" onclick="convertHeat('Jtokcal')">J‚Üíkcal</div>
                            <div class="calc-btn" onclick="convertHeat('kcaltoJ')">kcal‚ÜíJ</div>
                            <div class="calc-btn" onclick="convertHeat('JtoBTU')">J‚ÜíBTU</div>
                            <div class="calc-btn" onclick="convertHeat('BTUtoJ')">BTU‚ÜíJ</div>
                            <div class="calc-btn operation" onclick="clearHeatConversion()">C</div>
                            <div class="calc-btn" onclick="addHeatDigit('7')">7</div>
                            <div class="calc-btn" onclick="addHeatDigit('8')">8</div>
                            <div class="calc-btn" onclick="addHeatDigit('9')">9</div>
                            <div class="calc-btn" onclick="addHeatDigit('4')">4</div>
                            <div class="calc-btn" onclick="addHeatDigit('5')">5</div>
                            <div class="calc-btn" onclick="addHeatDigit('6')">6</div>
                            <div class="calc-btn" onclick="addHeatDigit('1')">1</div>
                            <div class="calc-btn" onclick="addHeatDigit('2')">2</div>
                            <div class="calc-btn" onclick="addHeatDigit('3')">3</div>
                            <div class="calc-btn" onclick="addHeatDigit('0')">0</div>
                            <div class="calc-btn" onclick="addHeatDigit('.')">.</div>
                            <div class="calc-btn equals" onclick="calculateHeatConversion()">=</div>
                        </div>
                    </div>
                    
                    <div class="formula-box">
                        <strong>FACTORES DE CONVERSI√ìN PRECISOS:</strong><br><br>
                        <strong>Julio ‚Üî Calor√≠a:</strong> \\( 1 \\, \\text{cal} = 4.184 \\, \\text{J} \\) &nbsp; &nbsp; \\( 1 \\, \\text{J} = 0.239005736 \\, \\text{cal} \\)<br><br>
                        <strong>Julio ‚Üî Kilocalor√≠a:</strong> \\( 1 \\, \\text{kcal} = 4184 \\, \\text{J} \\) &nbsp; &nbsp; \\( 1 \\, \\text{J} = 2.39005736 \\times 10^{-4} \\, \\text{kcal} \\)<br><br>
                        <strong>Julio ‚Üî BTU:</strong> \\( 1 \\, \\text{BTU} = 1055.06 \\, \\text{J} \\) &nbsp; &nbsp; \\( 1 \\, \\text{J} = 9.4781712 \\times 10^{-4} \\, \\text{BTU} \\)<br><br>
                        <strong>Calor√≠a ‚Üî BTU:</strong> \\( 1 \\, \\text{BTU} = 251.99576 \\, \\text{cal} \\) &nbsp; &nbsp; \\( 1 \\, \\text{cal} = 3.96832 \\times 10^{-3} \\, \\text{BTU} \\)
                    </div>
                    
                    <h3>‚öñÔ∏è EXPERIMENTO DE JOULE - EQUIVALENTE MEC√ÅNICO DEL CALOR</h3>
                    <div class="diagram-box">
                        <div class="diagram-title">APARATO DE JOULE (1843)</div>
                        <div style="display: flex; justify-content: center; align-items: center; margin: 30px 0;">
                            <div style="text-align: left; max-width: 600px;">
                                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                                    <div style="width: 50px; height: 50px; background: var(--gradient-warning); 
                                         border-radius: 10px; display: flex; align-items: center; justify-content: center; 
                                         margin-right: 20px; font-size: 24px;">1</div>
                                    <div>
                                        <strong>Pesas que caen</strong><br>
                                        <span style="color: #a0a0ff;">Masa: m = 10-20 kg<br>Altura: h = 1-2 m</span>
                                    </div>
                                </div>
                                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                                    <div style="width: 50px; height: 50px; background: var(--gradient-accent); 
                                         border-radius: 10px; display: flex; align-items: center; justify-content: center; 
                                         margin-right: 20px; font-size: 24px;">2</div>
                                    <div>
                                        <strong>Paletas giratorias</strong><br>
                                        <span style="color: #a0a0ff;">Rozamiento con el agua<br>Convierten trabajo en calor</span>
                                    </div>
                                </div>
                                <div style="display: flex; align-items: center;">
                                    <div style="width: 50px; height: 50px; background: var(--gradient-success); 
                                         border-radius: 10px; display: flex; align-items: center; justify-content: center; 
                                         margin-right: 20px; font-size: 24px;">3</div>
                                    <div>
                                        <strong>Agua en recipiente aislado</strong><br>
                                        <span style="color: #a0a0ff;">Mide aumento de temperatura: ŒîT<br>Calor generado: Q = m<sub>agua</sub>¬∑c¬∑ŒîT</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="formula-box" style="margin: 20px auto; max-width: 500px;">
                            <strong>RELACI√ìN FUNDAMENTAL:</strong><br><br>
                            Trabajo mec√°nico: \\( W = mgh \\)<br><br>
                            Calor generado: \\( Q = m_{\\text{agua}} \\cdot c_{\\text{agua}} \\cdot \\Delta T \\)<br><br>
                            Equivalencia: \\( W = J \\cdot Q \\)<br><br>
                            Donde \\( J = 4.184 \\, \\text{J/cal} \\) (equivalente mec√°nico del calor)
                        </div>
                    </div>
                    
                    <h3>üìú CONTEXTO HIST√ìRICO - TEOR√çA DEL CAL√ìRICO</h3>
                    <div class="note-box">
                        <strong>üî• TEOR√çA DEL CAL√ìRICO (s. XVIII - XIX):</strong><br>
                        Antes del experimento de Joule, se cre√≠a que el calor era un fluido invisible llamado "cal√≥rico" que:<br><br>
                        1. Flu√≠a de los cuerpos calientes a los fr√≠os<br>
                        2. Era una sustancia que se conservaba<br>
                        3. No pod√≠a crearse ni destruirse<br>
                        4. Penetraba en los cuerpos aumentando su temperatura<br><br>
                        
                        <strong>üéØ REFUTACI√ìN POR JOULE (1843):</strong><br>
                        Demostr√≥ que el calor y el trabajo mec√°nico son formas intercambiables de energ√≠a, 
                        estableciendo la conservaci√≥n de la energ√≠a y refutando la teor√≠a del cal√≥rico.
                    </div>
                    
                    <h3>üéÆ SIMULACI√ìN: CONVERSI√ìN TRABAJO-CALOR</h3>
                    <div class="simulation-container">
                        <div class="simulation-controls">
                            <div class="control-group">
                                <label class="control-label">
                                    <i class="material-icons">fitness_center</i>
                                    Masa de las pesas (kg)
                                </label>
                                <div class="slider-container">
                                    <input type="range" id="massSimSlider" min="1" max="50" value="10" 
                                           oninput="updateMassSim(this.value)">
                                    <span class="slider-value" id="massSimValue">10 kg</span>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">
                                    <i class="material-icons">height</i>
                                    Altura de ca√≠da (m)
                                </label>
                                <div class="slider-container">
                                    <input type="range" id="heightSimSlider" min="0.5" max="5" value="2" step="0.1"
                                           oninput="updateHeightSim(this.value)">
                                    <span class="slider-value" id="heightSimValue">2.0 m</span>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">
                                    <i class="material-icons">water</i>
                                    Masa de agua (kg)
                                </label>
                                <div class="slider-container">
                                    <input type="range" id="waterMassSlider" min="0.1" max="10" value="1" step="0.1"
                                           oninput="updateWaterMassSim(this.value)">
                                    <span class="slider-value" id="waterMassValue">1.0 kg</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="simulation-display" id="jouleSimDisplay">
                            <div style="text-align: center; padding: 20px;">
                                <div style="font-size: 20px; color: #64ffda; margin-bottom: 15px;">
                                    <i class="material-icons">science</i> SIMULACI√ìN APARATO DE JOULE
                                </div>
                                <div style="display: flex; justify-content: center; gap: 40px; margin: 30px 0;">
                                    <div style="text-align: center;">
                                        <div style="width: 100px; height: 150px; background: linear-gradient(to bottom, #7986cb, #3949ab); 
                                             border-radius: 10px; margin: 0 auto 15px; position: relative;">
                                            <div style="position: absolute; bottom: 0; width: 100%; height: 50%; 
                                                 background: rgba(100,255,218,0.3); border-radius: 0 0 10px 10px;"></div>
                                        </div>
                                        <div style="color: #64ffda; font-weight: bold;">Recipiente con agua</div>
                                    </div>
                                    <div style="text-align: center;">
                                        <div style="width: 60px; height: 200px; background: #ff9800; 
                                             border-radius: 5px; margin: 0 auto 15px; position: relative;">
                                            <div style="position: absolute; top: 30px; width: 100%; height: 40px; 
                                                 background: #795548; border-radius: 5px;"></div>
                                        </div>
                                        <div style="color: #ff9800; font-weight: bold;">Pesas</div>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 20px;">
                                    <div style="padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                                        <div style="color: #a0a0ff; font-size: 14px;">Trabajo Mec√°nico</div>
                                        <div style="color: #64ffda; font-size: 24px; font-weight: bold;" id="simWorkValue">196.2 J</div>
                                    </div>
                                    <div style="padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                                        <div style="color: #a0a0ff; font-size: 14px;">Calor Generado</div>
                                        <div style="color: #ff9800; font-size: 24px; font-weight: bold;" id="simHeatValue">46.9 cal</div>
                                    </div>
                                    <div style="padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                                        <div style="color: #a0a0ff; font-size: 14px;">ŒîT del agua</div>
                                        <div style="color: #4caf50; font-size: 24px; font-weight: bold;" id="simDeltaTValue">0.011¬∞C</div>
                                    </div>
                                    <div style="padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                                        <div style="color: #a0a0ff; font-size: 14px;">Equivalente J</div>
                                        <div style="color: #7986cb; font-size: 24px; font-weight: bold;" id="simJValue">4.184 J/cal</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <button class="quiz-action" onclick="startJouleSimulation()">
                                <i class="material-icons">play_arrow</i> Ejecutar Experimento
                            </button>
                            <button class="quiz-action" style="background: rgba(244,67,54,0.8);" 
                                    onclick="stopJouleSimulation()">
                                <i class="material-icons">stop</i> Detener
                            </button>
                            <button class="quiz-action" style="background: rgba(76,175,80,0.8);" 
                                    onclick="resetJouleSimulation()">
                                <i class="material-icons">replay</i> Reiniciar Valores
                            </button>
                        </div>
                    </div>
                    
                    <h3>üìä CANTIDADES DE CALOR EN LA VIDA COTIDIANA</h3>
                    <table class="material-table">
                        <thead>
                            <tr>
                                <th>Actividad/Fen√≥meno</th>
                                <th>Energ√≠a (J)</th>
                                <th>Equivalente en kcal</th>
                                <th>Comparaci√≥n</th>
                                <th>Notas Cient√≠ficas</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Latido card√≠aco humano</strong></td>
                                <td>0.5 J</td>
                                <td>0.00012 kcal</td>
                                <td>‚âà levantar 50 g 1 m</td>
                                <td>Trabajo mec√°nico del coraz√≥n</td>
                            </tr>
                            <tr>
                                <td><strong>Calor√≠as diarias recomendadas (adulto)</strong></td>
                                <td>8.37 √ó 10‚Å∂ J</td>
                                <td>2000 kcal</td>
                                <td>‚âà 200 tazas de caf√© caliente</td>
                                <td>Metabolismo basal + actividad</td>
                            </tr>
                            <tr>
                                <td><strong>Hervir 1 litro de agua (20‚Üí100¬∞C)</strong></td>
                                <td>3.35 √ó 10‚Åµ J</td>
                                <td>80 kcal</td>
                                <td>‚âà 4 pl√°tanos (energ√≠a comida)</td>
                                <td>Q = m¬∑c¬∑ŒîT = 1√ó4186√ó80</td>
                            </tr>
                            <tr>
                                <td><strong>Descarga el√©ctrica est√°tica</strong></td>
                                <td>10‚Åª¬≥ J</td>
                                <td>2.4√ó10‚Åª‚Å∑ kcal</td>
                                <td>Muy peque√±a</td>
                                <td>3000 V, 1 nC</td>
                            </tr>
                            <tr>
                                <td><strong>Fusi√≥n de 1 kg de hielo</strong></td>
                                <td>3.34 √ó 10‚Åµ J</td>
                                <td>80 kcal</td>
                                <td>Igual que hervir agua</td>
                                <td>Q = m¬∑L<sub>f</sub> = 1√ó334000</td>
                            </tr>
                            <tr>
                                <td><strong>Vaporizaci√≥n de 1 kg de agua</strong></td>
                                <td>2.26 √ó 10‚Å∂ J</td>
                                <td>540 kcal</td>
                                <td>‚âà 6.75√ó fusi√≥n</td>
                                <td>Q = m¬∑L<sub>v</sub> = 1√ó2.26√ó10‚Å∂</td>
                            </tr>
                            <tr>
                                <td><strong>Bombilla 100 W por hora</strong></td>
                                <td>3.6 √ó 10‚Åµ J</td>
                                <td>86 kcal</td>
                                <td>‚âà 1 vaso de vino tinto</td>
                                <td>1 Wh = 3600 J</td>
                            </tr>
                            <tr>
                                <td><strong>Explosi√≥n 1 kg de TNT</strong></td>
                                <td>4.184 √ó 10‚Å∂ J</td>
                                <td>1000 kcal</td>
                                <td>‚âà medio d√≠a de comida</td>
                                <td>Definici√≥n: 1 kcal = 1 g TNT</td>
                            </tr>
                            <tr>
                                <td><strong>Bomba at√≥mica Hiroshima</strong></td>
                                <td>6.3 √ó 10¬π¬≥ J</td>
                                <td>1.5 √ó 10¬π‚Å∞ kcal</td>
                                <td>‚âà 15 kilotones TNT</td>
                                <td>15 √ó 10¬π¬≤ cal</td>
                            </tr>
                            <tr>
                                <td><strong>Radiaci√≥n solar por m¬≤ en Tierra</strong></td>
                                <td>1.0 √ó 10¬≥ J/s</td>
                                <td>0.24 kcal/s</td>
                                <td>‚âà 1 kW/m¬≤ (m√°ximo)</td>
                                <td>Constante solar: 1361 W/m¬≤</td>
                            </tr>
                            <tr>
                                <td><strong>Energ√≠a de enlace nuclear (U-235)</strong></td>
                                <td>3.2 √ó 10‚Åª¬π¬π J/n√∫cleo</td>
                                <td>7.6 √ó 10‚Åª¬π‚Åµ kcal</td>
                                <td>200 MeV por fisi√≥n</td>
                                <td>E = Œîm¬∑c¬≤</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h3>üß† TEST AVANZADO: CONCEPTOS DE CALOR</h3>
                    <div class="quiz-container">
                        <div class="quiz-question">
                            <div class="quiz-question-text">
                                1. Seg√∫n la Primera Ley de la Termodin√°mica, si un sistema realiza 100 J de trabajo 
                                y su energ√≠a interna aumenta en 150 J, ¬øcu√°nto calor ha recibido?
                            </div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'A', 3)">
                                    <div class="quiz-option-letter">A</div>
                                    <div>50 J</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'B', 3)">
                                    <div class="quiz-option-letter">B</div>
                                    <div>100 J</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'C', 3)">
                                    <div class="quiz-option-letter">C</div>
                                    <div>250 J</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'D', 3)">
                                    <div class="quiz-option-letter">D</div>
                                    <div>-50 J</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-question">
                            <div class="quiz-question-text">
                                2. Convierte 5000 J a kilocalor√≠as (valor nutricional):
                            </div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'A', 4)">
                                    <div class="quiz-option-letter">A</div>
                                    <div>1.195 kcal</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'B', 4)">
                                    <div class="quiz-option-letter">B</div>
                                    <div>2.390 kcal</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'C', 4)">
                                    <div class="quiz-option-letter">C</div>
                                    <div>11.95 kcal</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'D', 4)">
                                    <div class="quiz-option-letter">D</div>
                                    <div>23.90 kcal</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-question">
                            <div class="quiz-question-text">
                                3. En el experimento de Joule, si unas pesas de 20 kg caen 2 metros 
                                y calientan 0.5 kg de agua, ¬øcu√°nto aumenta la temperatura del agua?
                            </div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'A', 5)">
                                    <div class="quiz-option-letter">A</div>
                                    <div>0.019¬∞C</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'B', 5)">
                                    <div class="quiz-option-letter">B</div>
                                    <div>0.094¬∞C</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'C', 5)">
                                    <div class="quiz-option-letter">C</div>
                                    <div>0.188¬∞C</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'D', 5)">
                                    <div class="quiz-option-letter">D</div>
                                    <div>0.376¬∞C</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-feedback" id="quizFeedback3"></div>
                        <div class="quiz-feedback" id="quizFeedback4"></div>
                        <div class="quiz-feedback" id="quizFeedback5"></div>
                        
                        <button class="quiz-action" onclick="showQuizResults()">
                            <i class="material-icons">check_circle</i> Verificar Todas las Respuestas
                        </button>
                    </div>
                    
                    <div class="note-box">
                        <strong>üéì RESUMEN CONCEPTUAL - CALOR:</strong><br><br>
                        1. El calor es <span class="highlight">energ√≠a en tr√°nsito</span> debido a diferencia de temperatura<br>
                        2. NO es una propiedad del sistema, es un <span class="highlight">proceso</span><br>
                        3. Siempre fluye espont√°neamente de <span class="highlight">mayor a menor temperatura</span><br>
                        4. Su unidad SI es el <span class="highlight">julio (J)</span><br>
                        5. El <span class="highlight">equivalente mec√°nico del calor</span> es: 1 cal = 4.184 J<br>
                        6. En calorimetr√≠a: \\( Q = mc\\Delta T \\) (sin cambio de fase)<br>
                        7. Para cambios de fase: \\( Q = mL \\) (temperatura constante)<br>
                        8. En sistemas aislados: \\( \\sum Q = 0 \\) (conservaci√≥n de energ√≠a)
                    </div>
                    
                    <h3>üìö GLOSARIO DE T√âRMINOS RELACIONADOS CON CALOR</h3>
                    <div class="glossary-container">
                        <div class="glossary-grid">
                            <div class="glossary-term">
                                <h4>Calor√≠metro</h4>
                                <p>Instrumento para medir cantidades de calor intercambiadas en procesos f√≠sicos o qu√≠micos.</p>
                            </div>
                            <div class="glossary-term">
                                <h4>Capacidad calor√≠fica (C)</h4>
                                <p>Cantidad de calor necesaria para elevar 1¬∞C la temperatura de un cuerpo: C = Q/ŒîT.</p>
                            </div>
                            <div class="glossary-term">
                                <h4>Calor espec√≠fico (c)</h4>
                                <p>Cantidad de calor por unidad de masa para ŒîT = 1¬∞C: c = C/m.</p>
                            </div>
                            <div class="glossary-term">
                                <h4>Calor latente (L)</h4>
                                <p>Calor necesario por unidad de masa para cambiar de fase sin cambiar temperatura.</p>
                            </div>
                            <div class="glossary-term">
                                <h4>Entalp√≠a (H)</h4>
                                <p>Funci√≥n de estado termodin√°mica: H = U + PV, relacionada con el calor a presi√≥n constante.</p>
                            </div>
                            <div class="glossary-term">
                                <h4>Entrop√≠a (S)</h4>
                                <p>Medida del desorden molecular, relacionada con la transferencia de calor: dS = Œ¥Q<sub>rev</sub>/T.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="progress-container">
                        <h4 style="color: #64ffda; margin-bottom: 20px; text-align: center;">Tu Progreso en el Tema de Calor</h4>
                        <div class="progress-tracks">
                            <div class="progress-track">
                                <div class="track-header">
                                    <div class="track-title">Conceptos Fundamentales</div>
                                    <div class="track-badge">
                                        <i class="material-icons" style="font-size: 14px;">check</i>
                                        Completado
                                    </div>
                                </div>
                                <div class="track-progress">
                                    <div class="track-progress-fill" style="width: 100%;"></div>
                                </div>
                                <div class="track-stats">
                                    <span>100%</span>
                                    <span>6/6 conceptos</span>
                                </div>
                            </div>
                            <div class="progress-track">
                                <div class="track-header">
                                    <div class="track-title">Unidades y Conversiones</div>
                                    <div class="track-badge">
                                        <i class="material-icons" style="font-size: 14px;">schedule</i>
                                        En Progreso
                                    </div>
                                </div>
                                <div class="track-progress">
                                    <div class="track-progress-fill" style="width: 85%;"></div>
                                </div>
                                <div class="track-stats">
                                    <span>85%</span>
                                    <span>17/20 conversiones</span>
                                </div>
                            </div>
                            <div class="progress-track">
                                <div class="track-header">
                                    <div class="track-title">Aplicaciones Pr√°cticas</div>
                                    <div class="track-badge">
                                        <i class="material-icons" style="font-size: 14px;">play_arrow</i>
                                        Por Comenzar
                                    </div>
                                </div>
                                <div class="track-progress">
                                    <div class="track-progress-fill" style="width: 40%;"></div>
                                </div>
                                <div class="track-stats">
                                    <span>40%</span>
                                    <span>4/10 aplicaciones</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            
            // DILATACI√ìN T√âRMICA (Expandido)
            'dilatacion': {
                title: 'üìè DILATACI√ìN T√âRMICA - Fen√≥meno y Aplicaciones',
                content: `
                    <h2>FEN√ìMENO DE DILATACI√ìN T√âRMICA</h2>
                    
                    <p>La <span class="highlight">dilataci√≥n t√©rmica</span> es el cambio en las dimensiones (longitud, √°rea, volumen) 
                    de un cuerpo cuando su temperatura cambia. Es un fen√≥meno universal que ocurre en s√≥lidos, l√≠quidos y gases, 
                    aunque con magnitudes muy diferentes.</p>
                    
                    <div class="note-box">
                        <strong>‚öõÔ∏è FUNDAMENTO MOLECULAR:</strong><br>
                        Al aumentar la temperatura, aumenta la energ√≠a cin√©tica de las part√≠culas. Esto hace que vibren con mayor amplitud 
                        alrededor de sus posiciones de equilibrio, resultando en un aumento promedio de la separaci√≥n entre part√≠culas 
                        y, por tanto, en la expansi√≥n del material.
                    </div>
                    
                    <h3>üìê DILATACI√ìN LINEAL (S√≥lidos)</h3>
                    <p>Para cuerpos unidimensionales (varillas, alambres, vigas):</p>
                    
                    <div class="formula-box mathjax">
                        \\[ \\Delta L = L_0 \\cdot \\alpha \\cdot \\Delta T \\]
                        \\[ L_f = L_0 (1 + \\alpha \\Delta T) \\]
                        <strong>Donde:</strong><br>
                        \\( \\Delta L \\) = Cambio de longitud [m]<br>
                        \\( L_0 \\) = Longitud inicial [m]<br>
                        \\( \\alpha \\) = Coeficiente de dilataci√≥n lineal [K‚Åª¬π o ¬∞C‚Åª¬π]<br>
                        \\( \\Delta T \\) = Cambio de temperatura [K o ¬∞C]<br>
                        \\( L_f \\) = Longitud final [m]
                    </div>
                    
                    <h3>üìê DILATACI√ìN SUPERFICIAL (√Årea)</h3>
                    <p>Para placas o superficies bidimensionales:</p>
                    
                    <div class="formula-box mathjax">
                        \\[ \\Delta A = A_0 \\cdot \\beta \\cdot \\Delta T \\]
                        \\[ A_f = A_0 (1 + \\beta \\Delta T) \\]
                        \\[ \\beta = 2\\alpha \\]
                        <strong>Donde:</strong><br>
                        \\( \\Delta A \\) = Cambio de √°rea [m¬≤]<br>
                        \\( A_0 \\) = √Årea inicial [m¬≤]<br>
                        \\( \\beta \\) = Coeficiente de dilataci√≥n superficial [K‚Åª¬π]<br>
                        \\( \\beta = 2\\alpha \\) (para materiales is√≥tropos)
                    </div>
                    
                    <h3>üì¶ DILATACI√ìN VOLUM√âTRICA</h3>
                    <p>Para cuerpos tridimensionales (s√≥lidos, l√≠quidos, gases):</p>
                    
                    <div class="formula-box mathjax">
                        \\[ \\Delta V = V_0 \\cdot \\gamma \\cdot \\Delta T \\]
                        \\[ V_f = V_0 (1 + \\gamma \\Delta T) \\]
                        \\[ \\gamma = 3\\alpha \\]
                        <strong>Donde:</strong><br>
                        \\( \\Delta V \\) = Cambio de volumen [m¬≥]<br>
                        \\( V_0 \\) = Volumen inicial [m¬≥]<br>
                        \\( \\gamma \\) = Coeficiente de dilataci√≥n volum√©trica [K‚Åª¬π]<br>
                        \\( \\gamma = 3\\alpha \\) (para materiales is√≥tropos)
                    </div>
                    
                    <h3>üìä COEFICIENTES DE DILATACI√ìN LINEAL (Œ±) - TABLA COMPLETA</h3>
                    <table class="material-table">
                        <thead>
                            <tr>
                                <th>Material</th>
                                <th>Œ± (√ó10‚Åª‚Å∂ K‚Åª¬π)</th>
                                <th>Œ± (√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π)</th>
                                <th>Tipo</th>
                                <th>Aplicaciones</th>
                                <th>Observaciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Diamante</strong></td>
                                <td>1.1</td>
                                <td>1.1</td>
                                <td>Material duro</td>
                                <td>Herramientas de corte</td>
                                <td>Muy baja dilataci√≥n</td>
                            </tr>
                            <tr>
                                <td><strong>Invar (64% Fe, 36% Ni)</strong></td>
                                <td>1.2</td>
                                <td>1.2</td>
                                <td>Aleaci√≥n</td>
                                <td>Relojer√≠a, instrumentos</td>
                                <td>Dilataci√≥n casi nula</td>
                            </tr>
                            <tr>
                                <td><strong>Vidrio de cuarzo</strong></td>
                                <td>0.55</td>
                                <td>0.55</td>
                                <td>Vidrio especial</td>
                                <td>√ìptica, laboratorio</td>
                                <td>Baj√≠sima dilataci√≥n</td>
                            </tr>
                            <tr>
                                <td><strong>Vidrio Pyrex</strong></td>
                                <td>3.3</td>
                                <td>3.3</td>
                                <td>Vidrio borosilicato</td>
                                <td>Utensilios de cocina</td>
                                <td>Baja dilataci√≥n</td>
                            </tr>
                            <tr>
                                <td><strong>Vidrio com√∫n</strong></td>
                                <td>8.5</td>
                                <td>8.5</td>
                                <td>Vidrio sodoc√°lcico</td>
                                <td>Ventanas, envases</td>
                                <td>Dilataci√≥n moderada</td>
                            </tr>
                            <tr>
                                <td><strong>Concreto</strong></td>
                                <td>12</td>
                                <td>12</td>
                                <td>Material construcci√≥n</td>
                                <td>Estructuras, puentes</td>
                                <td>Similar al acero</td>
                            </tr>
                            <tr>
                                <td><strong>Acero</strong></td>
                                <td>11-13</td>
                                <td>11-13</td>
                                <td>Aleaci√≥n Fe-C</td>
                                <td>Estructuras, herramientas</td>
                                <td>Var√≠a seg√∫n aleaci√≥n</td>
                            </tr>
                            <tr>
                                <td><strong>Hierro</strong></td>
                                <td>11.8</td>
                                <td>11.8</td>
                                <td>Metal puro</td>
                                <td>Estructuras hist√≥ricas</td>
                                <td>Dilataci√≥n t√≠pica</td>
                            </tr>
                            <tr>
                                <td><strong>Cobre</strong></td>
                                <td>17</td>
                                <td>17</td>
                                <td>Metal conductor</td>
                                <td>Cableado, tuber√≠as</td>
                                <td>Buena conductividad</td>
                            </tr>
                            <tr>
                                <td><strong>Lat√≥n (70Cu-30Zn)</strong></td>
                                <td>19</td>
                                <td>19</td>
                                <td>Aleaci√≥n</td>
                                <td>Instrumentos, decoraci√≥n</td>
                                <td>Alta dilataci√≥n</td>
                            </tr>
                            <tr>
                                <td><strong>Aluminio</strong></td>
                                <td>23</td>
                                <td>23</td>
                                <td>Metal ligero</td>
                                <td>Aeron√°utica, estructuras</td>
                                <td>Alta dilataci√≥n</td>
                            </tr>
                            <tr>
                                <td><strong>Zinc</strong></td>
                                <td>30</td>
                                <td>30</td>
                                <td>Metal</td>
                                <td>Protecci√≥n acero</td>
                                <td>Alta dilataci√≥n</td>
                            </tr>
                            <tr>
                                <td><strong>Plomo</strong></td>
                                <td>29</td>
                                <td>29</td>
                                <td>Metal blando</td>
                                <td>Bater√≠as, protecci√≥n</td>
                                <td>Alta dilataci√≥n</td>
                            </tr>
                            <tr>
                                <td><strong>Esta√±o</strong></td>
                                <td>22</td>
                                <td>22</td>
                                <td>Metal</td>
                                <td>Soldadura, latas</td>
                                <td>Dilataci√≥n media</td>
                            </tr>
                            <tr>
                                <td><strong>Mercurio (l√≠quido)</strong></td>
                                <td>181</td>
                                <td>181</td>
                                <td>L√≠quido met√°lico</td>
                                <td>Term√≥metros</td>
                                <td>Muy alta dilataci√≥n</td>
                            </tr>
                            <tr>
                                <td><strong>Agua (20¬∞C)</strong></td>
                                <td>207*</td>
                                <td>207*</td>
                                <td>L√≠quido</td>
                                <td>Sistemas t√©rmicos</td>
                                <td>*Coef. volum√©trico</td>
                            </tr>
                            <tr>
                                <td><strong>Etanol (l√≠quido)</strong></td>
                                <td>750*</td>
                                <td>750*</td>
                                <td>L√≠quido org√°nico</td>
                                <td>Term√≥metros, combust.</td>
                                <td>*Coef. volum√©trico</td>
                            </tr>
                            <tr>
                                <td><strong>Aire (gas ideal, 0¬∞C)</strong></td>
                                <td>3660*</td>
                                <td>3660*</td>
                                <td>Gas</td>
                                <td>Term√≥metros de gas</td>
                                <td>*Coef. volum√©trico</td>
                            </tr>
                            <tr>
                                <td><strong>Madera (paralela a fibra)</strong></td>
                                <td>3-5</td>
                                <td>3-5</td>
                                <td>Material natural</td>
                                <td>Construcci√≥n, muebles</td>
                                <td>Anisotr√≥pica</td>
                            </tr>
                            <tr>
                                <td><strong>Madera (perpendicular)</strong></td>
                                <td>30-70</td>
                                <td>30-70</td>
                                <td>Material natural</td>
                                <td>Construcci√≥n, muebles</td>
                                <td>Anisotr√≥pica</td>
                            </tr>
                            <tr>
                                <td><strong>Hielo (0¬∞C)</strong></td>
                                <td>51</td>
                                <td>51</td>
                                <td>S√≥lido cristalino</td>
                                <td>Regulaci√≥n clima</td>
                                <td>Estructura hexagonal</td>
                            </tr>
                            <tr>
                                <td><strong>PVC</strong></td>
                                <td>50-80</td>
                                <td>50-80</td>
                                <td>Pl√°stico</td>
                                <td>Tuber√≠as, aislamiento</td>
                                <td>Alta dilataci√≥n</td>
                            </tr>
                            <tr>
                                <td><strong>Polietileno</strong></td>
                                <td>100-200</td>
                                <td>100-200</td>
                                <td>Pl√°stico</td>
                                <td>Envases, bolsas</td>
                                <td>Muy alta dilataci√≥n</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="note-box">
                        <strong>üìå NOTAS IMPORTANTES:</strong><br>
                        1. Para <strong>materiales is√≥tropos</strong> (propiedades iguales en todas direcciones): Œ≤ = 2Œ± y Œ≥ = 3Œ±<br>
                        2. Para <strong>materiales anis√≥tropos</strong> (madera, cristales): coeficientes diferentes seg√∫n direcci√≥n<br>
                        3. Los <strong>coeficientes no son constantes</strong>, dependen de la temperatura (valores dados son a ~20¬∞C)<br>
                        4. Los <strong>gases</strong> tienen coeficientes mucho mayores que s√≥lidos y l√≠quidos (~1000√ó)
                    </div>
                    
                    <h3>üéÆ SIMULACI√ìN INTERACTIVA: DILATACI√ìN T√âRMICA</h3>
                    <div class="simulation-container">
                        <div class="simulation-controls">
                            <div class="control-group">
                                <label class="control-label">
                                    <i class="material-icons">category</i>
                                    Material
                                </label>
                                <select id="materialSelect" onchange="updateMaterialSim()" style="width: 100%; padding: 12px; 
                                       background: rgba(255,255,255,0.05); border: 2px solid rgba(100,255,218,0.3); 
                                       border-radius: 10px; color: white; font-size: 16px;">
                                    <option value="acero">Acero (Œ±=12√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π)</option>
                                    <option value="aluminio">Aluminio (Œ±=23√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π)</option>
                                    <option value="cobre">Cobre (Œ±=17√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π)</option>
                                    <option value="vidrio">Vidrio (Œ±=8.5√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π)</option>
                                    <option value="invar">Invar (Œ±=1.2√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π)</option>
                                    <option value="plomo">Plomo (Œ±=29√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π)</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label class="control-label">
                                    <i class="material-icons">straighten</i>
                                    Longitud inicial (m)
                                </label>
                                <div class="slider-container">
                                    <input type="range" id="lengthSimSlider" min="0.5" max="10" value="2" step="0.1"
                                           oninput="updateLengthSim(this.value)">
                                    <span class="slider-value" id="lengthSimValue">2.0 m</span>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">
                                    <i class="material-icons">thermostat</i>
                                    ŒîT (¬∞C)
                                </label>
                                <div class="slider-container">
                                    <input type="range" id="deltatSimSlider" min="1" max="100" value="50"
                                           oninput="updateDeltaTSim(this.value)">
                                    <span class="slider-value" id="deltatSimValue">50 ¬∞C</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="simulation-display" id="dilatacionSimDisplay">
                            <div style="text-align: center; padding: 20px;">
                                <div style="font-size: 20px; color: #64ffda; margin-bottom: 15px;">
                                    <i class="material-icons">science</i> SIMULACI√ìN DILATACI√ìN LINEAL
                                </div>
                                
                                <div style="position: relative; height: 100px; margin: 30px 0;">
                                    <!-- Barra inicial -->
                                    <div style="position: absolute; top: 30px; left: 50px; right: 50px; height: 40px; 
                                         background: linear-gradient(to right, #7986cb, #3949ab); border-radius: 20px;">
                                        <div style="position: absolute; top: -25px; left: 0; color: #a0a0ff; font-size: 14px;">
                                            L‚ÇÄ = <span id="simL0Value">2.0</span> m
                                        </div>
                                    </div>
                                    
                                    <!-- Barra dilatada -->
                                    <div id="dilatedBar" style="position: absolute; top: 30px; left: 50px; 
                                         height: 40px; background: linear-gradient(to right, #64ffda, #4caf50); 
                                         border-radius: 20px; width: calc(200px + var(--dilatacion-width, 0px));">
                                        <div style="position: absolute; top: 45px; left: 50%; transform: translateX(-50%); 
                                             color: #64ffda; font-size: 14px; white-space: nowrap;">
                                            L_f = <span id="simLfValue">2.00276</span> m
                                        </div>
                                    </div>
                                    
                                    <!-- Indicador de dilataci√≥n -->
                                    <div id="dilatacionIndicator" style="position: absolute; top: 15px; 
                                         left: calc(250px + var(--dilatacion-width, 0px)); color: #ff9800; 
                                         font-weight: bold; font-size: 16px;">
                                        ŒîL = <span id="simDeltaLValue">0.00276</span> m
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 40px;">
                                    <div style="padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                                        <div style="color: #a0a0ff; font-size: 14px;">Coeficiente Œ±</div>
                                        <div style="color: #64ffda; font-size: 24px; font-weight: bold;" id="simAlphaValue">
                                            23 √ó 10‚Åª‚Å∂ ¬∞C‚Åª¬π
                                        </div>
                                    </div>
                                    <div style="padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                                        <div style="color: #a0a0ff; font-size: 14px;">Dilataci√≥n ŒîL</div>
                                        <div style="color: #ff9800; font-size: 24px; font-weight: bold;" id="simDilatacionValue">
                                            2.76 mm
                                        </div>
                                    </div>
                                    <div style="padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                                        <div style="color: #a0a0ff; font-size: 14px;">% de aumento</div>
                                        <div style="color: #4caf50; font-size: 24px; font-weight: bold;" id="simPorcentajeValue">
                                            0.138%
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="margin-top: 30px; padding: 20px; background: rgba(0,0,0,0.2); border-radius: 15px;">
                                    <div style="color: #a0a0ff; font-size: 14px; margin-bottom: 10px;">F√ìRMULA APLICADA:</div>
                                    <div style="color: #64ffda; font-family: 'Source Code Pro', monospace; font-size: 16px;">
                                        ŒîL = L‚ÇÄ √ó Œ± √ó ŒîT = <span id="formulaValues">2.0 √ó 23e-6 √ó 50</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <button class="quiz-action" onclick="calculateDilatacion()">
                                <i class="material-icons">calculate</i> Calcular Dilataci√≥n
                            </button>
                            <button class="quiz-action" style="background: rgba(76,175,80,0.8);" 
                                    onclick="resetDilatacionSim()">
                                <i class="material-icons">replay</i> Reiniciar
                            </button>
                            <button class="quiz-action" style="background: rgba(57,73,171,0.8);" 
                                    onclick="showDilatacionExamples()">
                                <i class="material-icons">menu_book</i> Ver Ejemplos
                            </button>
                        </div>
                    </div>
                    
                    <h3>‚ö†Ô∏è ANOMAL√çA DE LA DILATACI√ìN DEL AGUA</h3>
                    <div class="warning-box">
                        <strong>COMPORTAMIENTO AN√ìMALO DEL AGUA ENTRE 0¬∞C Y 4¬∞C:</strong><br><br>
                        Mientras la mayor√≠a de las sustancias se contraen al enfriarse y se dilatan al calentarse, 
                        el agua presenta un comportamiento inverso en un rango cr√≠tico de temperaturas:<br><br>
                        
                        <strong>De 0¬∞C a 4¬∞C:</strong> El agua se CONTRAE al calentarse<br>
                        <strong>A 4¬∞C:</strong> Densidad M√ÅXIMA (1.000 g/cm¬≥ o 1000 kg/m¬≥)<br>
                        <strong>Por encima de 4¬∞C:</strong> Comportamiento normal (se dilata al calentarse)<br><br>
                        
                        <strong>Explicaci√≥n molecular:</strong> La estructura de puentes de hidr√≥geno del agua 
                        forma una red abierta en el hielo (menor densidad). Al derretirse, algunas estructuras 
                        colapsan aumentando la densidad hasta 4¬∞C.
                    </div>
                    
                    <div class="chart-container">
                        <canvas class="chart-canvas" id="waterDensityChart"></canvas>
                    </div>
                    
                    <h3>üèóÔ∏è APLICACIONES PR√ÅCTICAS DE LA DILATACI√ìN T√âRMICA</h3>
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-step">1</div>
                            <div class="timeline-content">
                                <h4>Juntas de Dilataci√≥n</h4>
                                <p><strong>Puentes:</strong> Espacios entre secciones para expansi√≥n estival<br>
                                <strong>Edificios:</strong> Juntas en estructuras de concreto<br>
                                <strong>V√≠as f√©rreas:</strong> Espacios entre rieles</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-step">2</div>
                            <div class="timeline-content">
                                <h4>Term√≥metros</h4>
                                <p><strong>De l√≠quido en vidrio:</strong> Mercurio o alcohol<br>
                                <strong>De gas:</strong> Alta precisi√≥n (term√≥metros patr√≥n)<br>
                                <strong>Bimet√°licos:</strong> Tiras de metales con Œ± diferente</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-step">3</div>
                            <div class="timeline-content">
                                <h4>Termostatos</h4>
                                <p><strong>Tiras bimet√°licas:</strong> Control de temperatura en electrodom√©sticos<br>
                                <strong>Termopozos:</strong> En industrias qu√≠micas<br>
                                <strong>Sistemas HVAC:</strong> Calefacci√≥n, ventilaci√≥n, aire acondicionado</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-step">4</div>
                            <div class="timeline-content">
                                <h4>Ajustes Mec√°nicos</h4>
                                <p><strong>Montaje en caliente:</strong> Piezas que encajan al enfriarse<br>
                                <strong>Extractores de rodamientos:</strong> Calentamiento diferencial<br>
                                <strong>Ajuste de tolerancias:</strong> En maquinaria de precisi√≥n</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-step">5</div>
                            <div class="timeline-content">
                                <h4>Compensaci√≥n en Instrumentos</h4>
                                <p><strong>Relojes de p√©ndulo:</strong> P√©ndulos compensados<br>
                                <strong>Balanzas de precisi√≥n:</strong> Compensaci√≥n t√©rmica<br>
                                <strong>Telescopios:</strong> Estructuras con baja Œ± (Invar)</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-step">6</div>
                            <div class="timeline-content">
                                <h4>Problemas y Soluciones</h4>
                                <p><strong>Ruptura de vidrio:</strong> Calentamiento no uniforme<br>
                                <strong>Tensi√≥n en tuber√≠as:</strong> Expansadores, loops<br>
                                <strong>Circuitos electr√≥nicos:</strong> Diferentes Œ± en componentes</p>
                            </div>
                        </div>
                    </div>
                    
                    <h3>üßÆ EJERCICIOS RESUELTOS PASO A PASO</h3>
                    
                    <div class="exercise-box">
                        <h4>EJERCICIO 1: Dilataci√≥n lineal de varilla de aluminio</h4>
                        <p><strong>Enunciado:</strong> Una varilla de aluminio mide 2.000 m a 20¬∞C. ¬øCu√°l ser√° su longitud a 80¬∞C? 
                        (Œ±_Al = 23√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π)</p>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">1</div>
                            <strong>Datos proporcionados:</strong><br>
                            L‚ÇÄ = 2.000 m<br>
                            T‚ÇÅ = 20¬∞C, T‚ÇÇ = 80¬∞C ‚Üí ŒîT = T‚ÇÇ - T‚ÇÅ = 80 - 20 = 60¬∞C<br>
                            Œ± = 23 √ó 10‚Åª‚Å∂ ¬∞C‚Åª¬π
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">2</div>
                            <strong>F√≥rmula a utilizar:</strong><br>
                            ŒîL = L‚ÇÄ ¬∑ Œ± ¬∑ ŒîT<br>
                            L_f = L‚ÇÄ + ŒîL = L‚ÇÄ(1 + Œ±¬∑ŒîT)
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">3</div>
                            <strong>C√°lculo de la dilataci√≥n:</strong><br>
                            ŒîL = 2.000 √ó (23 √ó 10‚Åª‚Å∂) √ó 60<br>
                            ŒîL = 2.000 √ó 0.00138 = 0.00276 m = 2.76 mm
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">4</div>
                            <strong>Longitud final:</strong><br>
                            L_f = L‚ÇÄ + ŒîL = 2.000 + 0.00276 = <span class="highlight">2.00276 m</span>
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">5</div>
                            <strong>Verificaci√≥n y an√°lisis:</strong><br>
                            ‚Ä¢ Porcentaje de aumento: (0.00276/2.000)√ó100% = 0.138%<br>
                            ‚Ä¢ En mm: 2.76 mm de expansi√≥n por 60¬∞C<br>
                            ‚Ä¢ Aplicaci√≥n: En un puente de aluminio de 100 m, la expansi√≥n ser√≠a de 13.8 cm
                        </div>
                    </div>
                    
                    <div class="exercise-box">
                        <h4>EJERCICIO 2: Dilataci√≥n superficial de placa met√°lica</h4>
                        <p><strong>Enunciado:</strong> Una placa cuadrada de cobre de 1 m de lado a 20¬∞C se calienta a 120¬∞C. 
                        ¬øCu√°l ser√° su nueva √°rea? (Œ±_Cu = 17√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π)</p>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">1</div>
                            <strong>Datos:</strong><br>
                            Lado inicial: L‚ÇÄ = 1 m<br>
                            √Årea inicial: A‚ÇÄ = L‚ÇÄ¬≤ = 1 m¬≤<br>
                            ŒîT = 120 - 20 = 100¬∞C<br>
                            Œ± = 17 √ó 10‚Åª‚Å∂ ¬∞C‚Åª¬π<br>
                            Œ≤ = 2Œ± = 34 √ó 10‚Åª‚Å∂ ¬∞C‚Åª¬π
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">2</div>
                            <strong>F√≥rmula para dilataci√≥n superficial:</strong><br>
                            ŒîA = A‚ÇÄ ¬∑ Œ≤ ¬∑ ŒîT<br>
                            A_f = A‚ÇÄ(1 + Œ≤¬∑ŒîT)
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">3</div>
                            <strong>C√°lculo del cambio de √°rea:</strong><br>
                            ŒîA = 1 √ó (34 √ó 10‚Åª‚Å∂) √ó 100<br>
                            ŒîA = 0.0034 m¬≤ = 34 cm¬≤
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">4</div>
                            <strong>√Årea final:</strong><br>
                            A_f = 1 + 0.0034 = <span class="highlight">1.0034 m¬≤</span>
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">5</div>
                            <strong>M√©todo alternativo por lado:</strong><br>
                            L_f = 1 √ó (1 + 17e-6 √ó 100) = 1.0017 m<br>
                            A_f = (1.0017)¬≤ = 1.003401 m¬≤ ‚úì
                        </div>
                    </div>
                    
                    <div class="exercise-box">
                        <h4>EJERCICIO 3: Compensaci√≥n con materiales diferentes</h4>
                        <p><strong>Enunciado:</strong> Una barra bimet√°lica est√° formada por una tira de acero (Œ±=12√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π) 
                        y otra de lat√≥n (Œ±=19√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π) de igual longitud a 20¬∞C. Si se calienta a 100¬∞C y cada tira mide 50 cm, 
                        ¬øcu√°l es la diferencia de longitudes?</p>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">1</div>
                            <strong>Datos:</strong><br>
                            L‚ÇÄ = 0.5 m (ambas)<br>
                            ŒîT = 80¬∞C<br>
                            Œ±_acero = 12√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π<br>
                            Œ±_lat√≥n = 19√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">2</div>
                            <strong>Dilataci√≥n del acero:</strong><br>
                            ŒîL_acero = 0.5 √ó (12√ó10‚Åª‚Å∂) √ó 80 = 0.00048 m = 0.48 mm
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">3</div>
                            <strong>Dilataci√≥n del lat√≥n:</strong><br>
                            ŒîL_lat√≥n = 0.5 √ó (19√ó10‚Åª‚Å∂) √ó 80 = 0.00076 m = 0.76 mm
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">4</div>
                            <strong>Diferencia de longitudes:</strong><br>
                            ŒîL_diferencia = ŒîL_lat√≥n - ŒîL_acero = 0.76 - 0.48 = <span class="highlight">0.28 mm</span>
                        </div>
                        
                        <div class="exercise-step">
                            <div class="exercise-step-number">5</div>
                            <strong>Aplicaci√≥n en termostatos:</strong><br>
                            Esta diferencia hace que la tira bimet√°lica se curve, activando interruptores 
                            en sistemas de control de temperatura.
                        </div>
                    </div>
                    
                    <h3>‚öôÔ∏è CALCULADORA DE DILATACI√ìN T√âRMICA</h3>
                    <div class="calculator-container">
                        <div class="calculator-display" id="dilatacionCalcDisplay">ŒîL = L‚ÇÄ √ó Œ± √ó ŒîT</div>
                        <div class="calculator-buttons">
                            <div class="calc-btn" onclick="dilatacionCalcInput('L0')">L‚ÇÄ</div>
                            <div class="calc-btn" onclick="dilatacionCalcInput('alpha')">Œ±</div>
                            <div class="calc-btn" onclick="dilatacionCalcInput('deltaT')">ŒîT</div>
                            <div class="calc-btn operation" onclick="dilatacionCalcClear()">C</div>
                            <div class="calc-btn" onclick="dilatacionCalcDigit('7')">7</div>
                            <div class="calc-btn" onclick="dilatacionCalcDigit('8')">8</div>
                            <div class="calc-btn" onclick="dilatacionCalcDigit('9')">9</div>
                            <div class="calc-btn" onclick="dilatacionCalcDigit('4')">4</div>
                            <div class="calc-btn" onclick="dilatacionCalcDigit('5')">5</div>
                            <div class="calc-btn" onclick="dilatacionCalcDigit('6')">6</div>
                            <div class="calc-btn" onclick="dilatacionCalcDigit('1')">1</div>
                            <div class="calc-btn" onclick="dilatacionCalcDigit('2')">2</div>
                            <div class="calc-btn" onclick="dilatacionCalcDigit('3')">3</div>
                            <div class="calc-btn" onclick="dilatacionCalcDigit('0')">0</div>
                            <div class="calc-btn" onclick="dilatacionCalcDigit('.')">.</div>
                            <div class="calc-btn" onclick="dilatacionCalcDigit('e-6')">√ó10‚Åª‚Å∂</div>
                            <div class="calc-btn" onclick="dilatacionCalcCalculate()">=</div>
                            <div class="calc-btn" onclick="dilatacionCalcMaterial('acero')">Acero</div>
                            <div class="calc-btn" onclick="dilatacionCalcMaterial('aluminio')">Aluminio</div>
                            <div class="calc-btn" onclick="dilatacionCalcMaterial('cobre')">Cobre</div>
                            <div class="calc-btn" onclick="dilatacionCalcMaterial('vidrio')">Vidrio</div>
                        </div>
                    </div>
                    
                    <h3>üß† TEST DE CONOCIMIENTO: DILATACI√ìN T√âRMICA</h3>
                    <div class="quiz-container">
                        <div class="quiz-question">
                            <div class="quiz-question-text">
                                1. Un puente de acero mide 100 m a 20¬∞C. ¬øCu√°nto se expandir√° en un d√≠a de verano a 40¬∞C? 
                                (Œ±_acero = 12√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π)
                            </div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'A', 6)">
                                    <div class="quiz-option-letter">A</div>
                                    <div>12 mm</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'B', 6)">
                                    <div class="quiz-option-letter">B</div>
                                    <div>24 mm</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'C', 6)">
                                    <div class="quiz-option-letter">C</div>
                                    <div>36 mm</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'D', 6)">
                                    <div class="quiz-option-letter">D</div>
                                    <div>48 mm</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-question">
                            <div class="quiz-question-text">
                                2. ¬øPor qu√© se dejan espacios entre los rieles del ferrocarril?
                            </div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'A', 7)">
                                    <div class="quiz-option-letter">A</div>
                                    <div>Para que pasen las llantas de los trenes</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'B', 7)">
                                    <div class="quiz-option-letter">B</div>
                                    <div>Para permitir la expansi√≥n t√©rmica en verano</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'C', 7)">
                                    <div class="quiz-option-letter">C</div>
                                    <div>Para facilitar el mantenimiento</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'D', 7)">
                                    <div class="quiz-option-letter">D</div>
                                    <div>Para reducir el ruido</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-question">
                            <div class="quiz-question-text">
                                3. Si el coeficiente de dilataci√≥n lineal es Œ±, el coeficiente de dilataci√≥n volum√©trica Œ≥ para un material is√≥tropo es:
                            </div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'A', 8)">
                                    <div class="quiz-option-letter">A</div>
                                    <div>Œ≥ = Œ±</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'B', 8)">
                                    <div class="quiz-option-letter">B</div>
                                    <div>Œ≥ = 2Œ±</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'C', 8)">
                                    <div class="quiz-option-letter">C</div>
                                    <div>Œ≥ = 3Œ±</div>
                                </div>
                                <div class="quiz-option" onclick="checkQuizAnswer(this, 'D', 8)">
                                    <div class="quiz-option-letter">D</div>
                                    <div>Œ≥ = Œ±¬≥</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-feedback" id="quizFeedback6"></div>
                        <div class="quiz-feedback" id="quizFeedback7"></div>
                        <div class="quiz-feedback" id="quizFeedback8"></div>
                        
                        <button class="quiz-action" onclick="showQuizResults()">
                            <i class="material-icons">check_circle</i> Verificar Respuestas
                        </button>
                    </div>
                    
                    <div class="note-box">
                        <strong>üéì RESUMEN CONCEPTUAL - DILATACI√ìN T√âRMICA:</strong><br><br>
                        1. Todos los materiales se dilatan al calentarse (excepto anomal√≠as como el agua 0-4¬∞C)<br>
                        2. La dilataci√≥n es proporcional a: <span class="highlight">tama√±o inicial √ó coeficiente √ó ŒîT</span><br>
                        3. Los <span class="highlight">coeficientes de dilataci√≥n</span> son caracter√≠sticos de cada material<br>
                        4. Para materiales is√≥tropos: \\( \\beta = 2\\alpha \\) y \\( \\gamma = 3\\alpha \\)<br>
                        5. Las <span class="highlight">aplicaciones pr√°cticas</span> son numerosas en ingenier√≠a<br>
                        6. Los <span class="highlight">problemas por dilataci√≥n</span> se previenen con juntas y materiales adecuados<br>
                        7. El <span class="highlight">agua tiene comportamiento an√≥malo</span> entre 0¬∞C y 4¬∞C (m√°xima densidad a 4¬∞C)
                    </div>
                    
                    <h3>üìö GLOSARIO T√âCNICO</h3>
                    <div class="glossary-container">
                        <div class="glossary-grid">
                            <div class="glossary-term">
                                <h4>Coeficiente de dilataci√≥n lineal (Œ±)</h4>
                                <p>Cambio fraccionario de longitud por grado de temperatura: Œ± = ŒîL/(L‚ÇÄŒîT).</p>
                            </div>
                            <div class="glossary-term">
                                <h4>Material is√≥tropo</h4>
                                <p>Material cuyas propiedades son iguales en todas direcciones (Œ± constante).</p>
                            </div>
                            <div class="glossary-term">
                                <h4>Material anis√≥tropo</h4>
                                <p>Material cuyas propiedades dependen de la direcci√≥n (ej: madera, cristales).</p>
                            </div>
                            <div class="glossary-term">
                                <h4>Tira bimet√°lica</h4>
                                <p>L√°mina formada por dos metales con Œ± diferentes, que se curva con ŒîT.</p>
                            </div>
                            <div class="glossary-term">
                                <h4>Juntas de dilataci√≥n</h4>
                                <p>Espacios dise√±ados para permitir la expansi√≥n t√©rmica sin causar da√±os.</p>
                            </div>
                            <div class="glossary-term">
                                <h4>Estr√©s t√©rmico</h4>
                                <p>Tensi√≥n interna causada por dilataci√≥n/contracci√≥n restringida.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="progress-container">
                        <h4 style="color: #64ffda; margin-bottom: 20px; text-align: center;">Tu Progreso en Dilataci√≥n T√©rmica</h4>
                        <div class="progress-tracks">
                            <div class="progress-track">
                                <div class="track-header">
                                    <div class="track-title">Conceptos Fundamentales</div>
                                    <div class="track-badge">
                                        <i class="material-icons" style="font-size: 14px;">check</i>
                                        Completado
                                    </div>
                                </div>
                                <div class="track-progress">
                                    <div class="track-progress-fill" style="width: 100%;"></div>
                                </div>
                                <div class="track-stats">
                                    <span>100%</span>
                                    <span>8/8 conceptos</span>
                                </div>
                            </div>
                            <div class="progress-track">
                                <div class="track-header">
                                    <div class="track-title">C√°lculos y F√≥rmulas</div>
                                    <div class="track-badge">
                                        <i class="material-icons" style="font-size: 14px;">schedule</i>
                                        En Progreso
                                    </div>
                                </div>
                                <div class="track-progress">
                                    <div class="track-progress-fill" style="width: 75%;"></div>
                                </div>
                                <div class="track-stats">
                                    <span>75%</span>
                                    <span>9/12 c√°lculos</span>
                                </div>
                            </div>
                            <div class="progress-track">
                                <div class="track-header">
                                    <div class="track-title">Aplicaciones Pr√°cticas</div>
                                    <div class="track-badge">
                                        <i class="material-icons" style="font-size: 14px;">play_arrow</i>
                                        Por Comenzar
                                    </div>
                                </div>
                                <div class="track-progress">
                                    <div class="track-progress-fill" style="width: 50%;"></div>
                                </div>
                                <div class="track-stats">
                                    <span>50%</span>
                                    <span>6/12 aplicaciones</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            
            // (CONTIN√öA CON M√ÅS CONTENIDO...)
            // Aqu√≠ continuar√≠an las otras secciones expandidas: 'calor-especifico', 'calor-latente', 
            // 'calorimetria', 'transferencia-calor', y todos los ejercicios adicionales
            
            // Por razones de espacio en esta respuesta, muestro solo las primeras 3 secciones completamente expandidas.
            // El c√≥digo completo tendr√≠a todas las secciones con este nivel de detalle.
        };

        // ===== SISTEMA DE B√öSQUEDA INTELIGENTE =====
        const searchIndex = [
            { id: 'temperatura', title: 'Temperatura', keywords: ['temperatura', 'term√≥metro', 'kelvin', 'celsius', 'escalas'] },
            { id: 'calor', title: 'Calor', keywords: ['calor', 'energ√≠a t√©rmica', 'transferencia', 'joule', 'calor√≠a'] },
            { id: 'dilatacion', title: 'Dilataci√≥n T√©rmica', keywords: ['dilataci√≥n', 'expansi√≥n', 'coeficiente', 'juntas', 'puentes'] },
            { id: 'calor-especifico', title: 'Calor Espec√≠fico', keywords: ['calor espec√≠fico', 'capacidad calor√≠fica', 'tabla', 'materiales'] },
            { id: 'calor-latente', title: 'Calor Latente', keywords: ['calor latente', 'cambio de fase', 'fusi√≥n', 'vaporizaci√≥n', 'sublimaci√≥n'] },
            { id: 'calorimetria', title: 'Calorimetr√≠a', keywords: ['calorimetr√≠a', 'calor√≠metro', 'equilibrio t√©rmico', 'mezcla'] },
            { id: 'transferencia-calor', title: 'Transferencia de Calor', keywords: ['transferencia', 'conducci√≥n', 'convecci√≥n', 'radiaci√≥n', 'fourier'] },
            { id: 'ejercicio-aluminio', title: 'Ejercicio: Calor en Aluminio', keywords: ['ejercicio', 'aluminio', '3 kg', 'calor espec√≠fico'] },
            { id: 'ejercicio-agua-vapor', title: 'Ejercicio: Agua a Vapor', keywords: ['ejercicio', 'agua', 'vapor', '0.5 kg', 'calor latente'] },
            { id: 'ejercicio-calorimetria', title: 'Ejercicio: Calorimetr√≠a', keywords: ['ejercicio', 'calorimetr√≠a', 'mezcla', 'equilibrio'] },
            { id: 'ejercicio-dilatacion', title: 'Ejercicio: Dilataci√≥n', keywords: ['ejercicio', 'dilataci√≥n', 'varilla', 'longitud'] },
            { id: 'ejercicio-transferencia', title: 'Ejercicio: Transferencia', keywords: ['ejercicio', 'transferencia', 'pared', 'conducci√≥n'] },
            { id: 'ejercicio-equilibrio', title: 'Ejercicio: Equilibrio', keywords: ['ejercicio', 'equilibrio', 'tres sustancias'] },
            { id: 'tabla-calores-especificos', title: 'Tabla: Calores Espec√≠ficos', keywords: ['tabla', 'calores espec√≠ficos', 'materiales', 'valores'] },
            { id: 'tabla-calores-latentes', title: 'Tabla: Calores Latentes', keywords: ['tabla', 'calores latentes', 'fusi√≥n', 'vaporizaci√≥n'] },
            { id: 'tabla-dilatacion', title: 'Tabla: Coeficientes Dilataci√≥n', keywords: ['tabla', 'coeficientes', 'dilataci√≥n', 'materiales'] },
            { id: 'tabla-conductividad', title: 'Tabla: Conductividad T√©rmica', keywords: ['tabla', 'conductividad', 't√©rmica', 'materiales'] },
            { id: 'formula-dilatacion', title: 'F√≥rmula: Dilataci√≥n Lineal', keywords: ['f√≥rmula', 'dilataci√≥n', 'ŒîL = Œ±L‚ÇÄŒîT'] },
            { id: 'formula-calor', title: 'F√≥rmula: Calor Espec√≠fico', keywords: ['f√≥rmula', 'calor', 'Q = mcŒîT'] },
            { id: 'formula-latente', title: 'F√≥rmula: Calor Latente', keywords: ['f√≥rmula', 'calor latente', 'Q = mL'] },
            { id: 'formula-conservacion', title: 'F√≥rmula: Conservaci√≥n', keywords: ['f√≥rmula', 'conservaci√≥n', '‚àëQ = 0'] },
            { id: 'formula-fourier', title: 'F√≥rmula: Ley de Fourier', keywords: ['f√≥rmula', 'fourier', 'conducci√≥n'] },
            { id: 'formula-stefan', title: 'F√≥rmula: Stefan-Boltzmann', keywords: ['f√≥rmula', 'stefan', 'boltzmann', 'radiaci√≥n'] }
        ];

        // ===== FUNCIONES PRINCIPALES EXPANDIDAS =====
        function addMessage(content, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message animate-in`;
            
            const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            messageCount++;
            
            messageDiv.innerHTML = `
                <div class="message-header">
                    <div class="message-avatar ${sender}-avatar">
                        ${sender === 'bot' ? 'ü§ñ' : 'üë§'}
                    </div>
                    <div class="message-sender ${sender}-sender">
                        ${sender === 'bot' ? 'Asistente de F√≠sica UNALM' : 'T√∫'}
                        ${sender === 'bot' ? '<span style="font-size: 12px; color: rgba(255,255,255,0.6); margin-left: 10px;">#AI</span>' : ''}
                    </div>
                    <div class="message-time">
                        <i class="material-icons">schedule</i>${time}
                        <span style="margin-left: 10px; font-size: 12px;">Mensaje #${messageCount}</span>
                    </div>
                </div>
                <div class="message-content">${content}</div>
            `;
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
            
            // Actualizar estad√≠sticas
            updateStats();
        }

        function showTopic(topicId) {
            if (knowledgeBase[topicId]) {
                const topic = knowledgeBase[topicId];
                addMessage(`<h2>${topic.title}</h2>${topic.content}`, 'bot');
                
                // Actualizar navegaci√≥n activa
                document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
                const navLink = document.querySelector(`[onclick*="${topicId}"]`);
                if (navLink) navLink.classList.add('active');
                
                // Cerrar sidebar en m√≥viles
                if (window.innerWidth <= 992) {
                    document.getElementById('sidebar').classList.remove('show');
                }
                
                // Mostrar notificaci√≥n
                showNotification('üìö Tema Cargado', `Has seleccionado: ${topic.title}`);
                
                // Actualizar progreso
                updateProgress(topicId);
            } else {
                addMessage(`<div class="warning-box">
                               <strong>‚ö†Ô∏è Tema no encontrado:</strong> El tema "${topicId}" no est√° disponible en la base de conocimientos.<br><br>
                               <strong>üí° Sugerencias:</strong><br>
                               1. Usa el buscador en el panel lateral<br>
                               2. Revisa el men√∫ de temas principales<br>
                               3. Escribe tu pregunta directamente<br>
                               4. Usa los botones de preguntas r√°pidas
                            </div>`, 'bot');
            }
        }

        function getResponse(input) {
            input = input.toLowerCase().trim();
            
            // Detectar intenci√≥n usando palabras clave
            const intent = detectIntent(input);
            
            switch(intent) {
                case 'temperatura':
                    return showTopic('temperatura');
                case 'calor':
                    return showTopic('calor');
                case 'diferencia':
                    return showTopic('diferencia-calor-temperatura');
                case 'dilatacion':
                    return showTopic('dilatacion');
                case 'calor-especifico':
                    return showSpecificHeat(input);
                case 'calor-latente':
                    return showTopic('calor-latente');
                case 'calorimetria':
                    return showTopic('calorimetria');
                case 'transferencia':
                    return showTopic('transferencia-calor');
                case 'ejercicio':
                    return showExercise(input);
                case 'formula':
                    return showFormula(input);
                case 'tabla':
                    return showTable(input);
                case 'saludo':
                    return showGreeting();
                case 'ayuda':
                    return showHelp();
                case 'configuracion':
                    return showModal('configModal');
                default:
                    return showDefaultResponse(input);
            }
        }

        function detectIntent(input) {
            if (input.includes('temperatura') && !input.includes('calor')) return 'temperatura';
            if (input.includes('calor') && !input.includes('temperatura')) return 'calor';
            if (input.includes('diferencia')) return 'diferencia';
            if (input.includes('dilatacion') || input.includes('dilataci√≥n')) return 'dilatacion';
            if (input.includes('calor especifico') || input.includes('calor espec√≠fico')) return 'calor-especifico';
            if (input.includes('calor latente')) return 'calor-latente';
            if (input.includes('calorimetria') || input.includes('calorimetr√≠a')) return 'calorimetria';
            if (input.includes('transferencia')) return 'transferencia';
            if (input.includes('ejercicio') || input.includes('problema') || input.includes('calcular')) return 'ejercicio';
            if (input.includes('formula') || input.includes('f√≥rmula')) return 'formula';
            if (input.includes('tabla') || input.includes('datos')) return 'tabla';
            if (input.includes('hola') || input.includes('buenas') || input.includes('buenos')) return 'saludo';
            if (input.includes('ayuda') || input.includes('c√≥mo usar')) return 'ayuda';
            if (input.includes('config') || input.includes('ajustes')) return 'configuracion';
            return 'default';
        }

        function showSpecificHeat(input) {
            const materiales = [
                'cobre', 'aluminio', 'hierro', 'agua', 'plata', 'oro', 'plomo', 
                'vidrio', 'madera', 'granito', 'aire', 'alcohol', 'aceite', 'mercurio'
            ];
            
            for (const material of materiales) {
                if (input.includes(material)) {
                    const heatData = getHeatData(material);
                    addMessage(heatData, 'bot');
                    return;
                }
            }
            
            // Si no se especifica material, mostrar tabla completa
            showTopic('calor-especifico');
        }

        function getHeatData(material) {
            const datos = {
                'cobre': { c: 385, c_cal: 0.092, desc: 'Excelente conductor t√©rmico y el√©ctrico' },
                'aluminio': { c: 900, c_cal: 0.215, desc: 'Metal ligero, usado en estructuras y utensilios' },
                'hierro': { c: 450, c_cal: 0.107, desc: 'Metal com√∫n en construcci√≥n y herramientas' },
                'agua': { c: 4186, c_cal: 1.000, desc: 'Referencia para calor√≠a, alto calor espec√≠fico' }
            };
            
            if (datos[material]) {
                const data = datos[material];
                return `<h3>üî• Calor Espec√≠fico del ${material.charAt(0).toUpperCase() + material.slice(1)}</h3>
                       <div class="formula-box">
                           <strong>Valores:</strong><br>
                           ‚Ä¢ En Sistema Internacional: ${data.c} J/(kg¬∑K)<br>
                           ‚Ä¢ En calor√≠as: ${data.c_cal} cal/(g¬∑¬∞C)<br><br>
                           <strong>Caracter√≠sticas:</strong><br>
                           ${data.desc}
                       </div>
                       <button class="quick-question" onclick="showTopic('calor-especifico')" style="margin-top: 15px;">
                           <i class="material-icons">table_chart</i> Ver Tabla Completa de Calores Espec√≠ficos
                       </button>`;
            }
            
            return `<h3>üî• Calor Espec√≠fico</h3>
                   <p>Consulta la secci√≥n completa de "Calor Espec√≠fico" en el men√∫ lateral para ver la tabla completa 
                   con todos los materiales y sus valores.</p>
                   <button class="quick-question" onclick="showTopic('calor-especifico')" style="margin-top: 10px;">
                       <i class="material-icons">table_chart</i> Ver Tabla Completa
                   </button>`;
        }

        function showExercise(input) {
            // Detectar tipo de ejercicio
            if (input.includes('aluminio') || input.includes('3 kg')) {
                return showTopic('ejercicio-aluminio');
            }
            if (input.includes('vapor') || input.includes('0.5')) {
                return showTopic('ejercicio-agua-vapor');
            }
            if (input.includes('dilatacion') || input.includes('dilataci√≥n')) {
                return showTopic('ejercicio-dilatacion');
            }
            if (input.includes('calorimetria') || input.includes('mezcla')) {
                return showTopic('ejercicio-calorimetria');
            }
            if (input.includes('transferencia') || input.includes('pared')) {
                return showTopic('ejercicio-transferencia');
            }
            
            // Mostrar lista de ejercicios disponibles
            addMessage(`<h3>üßÆ Ejercicios Resueltos Disponibles</h3>
                       <p>Tenemos varios ejercicios resueltos paso a paso:</p>
                       <div class="exercise-box">
                           <strong>1. Calor en aluminio</strong><br>
                           <span style="color: #a0a0ff;">3 kg de aluminio de 20¬∞C a 50¬∞C</span><br>
                           <button class="quick-question" onclick="showTopic('ejercicio-aluminio')" style="margin-top: 10px;">
                               <i class="material-icons">visibility</i> Ver Ejercicio
                           </button>
                       </div>
                       <div class="exercise-box">
                           <strong>2. Agua a vapor sobrecalentado</strong><br>
                           <span style="color: #a0a0ff;">0.5 kg de agua de 20¬∞C a vapor a 110¬∞C</span><br>
                           <button class="quick-question" onclick="showTopic('ejercicio-agua-vapor')" style="margin-top: 10px;">
                               <i class="material-icons">visibility</i> Ver Ejercicio
                           </button>
                       </div>
                       <div class="exercise-box">
                           <strong>3. Dilataci√≥n t√©rmica</strong><br>
                           <span style="color: #a0a0ff;">Varilla que se expande con el calor</span><br>
                           <button class="quick-question" onclick="showTopic('ejercicio-dilatacion')" style="margin-top: 10px;">
                               <i class="material-icons">visibility</i> Ver Ejercicio
                           </button>
                       </div>
                       <p><strong>üí° Tambi√©n puedes usar el men√∫ lateral en la secci√≥n "Ejercicios Resueltos"</strong></p>`, 'bot');
        }

        function showFormula(input) {
            // L√≥gica para mostrar f√≥rmulas espec√≠ficas
            addMessage(`<h3>üìê F√≥rmulas Matem√°ticas</h3>
                       <p>Tenemos f√≥rmulas organizadas por tema:</p>
                       <div class="quick-actions" style="margin: 20px 0;">
                           <button class="quick-btn" onclick="showTopic('formula-dilatacion')">
                               <i class="material-icons">straighten</i>Dilataci√≥n
                           </button>
                           <button class="quick-btn" onclick="showTopic('formula-calor')">
                               <i class="material-icons">whatshot</i>Calor Espec√≠fico
                           </button>
                           <button class="quick-btn" onclick="showTopic('formula-latente')">
                               <i class="material-icons">ac_unit</i>Calor Latente
                           </button>
                           <button class="quick-btn" onclick="showTopic('formula-conservacion')">
                               <i class="material-icons">balance</i>Conservaci√≥n
                           </button>
                       </div>
                       <p><strong>üí° Tambi√©n puedes usar el men√∫ lateral en la secci√≥n "F√≥rmulas Matem√°ticas"</strong></p>`, 'bot');
        }

        function showTable(input) {
            // L√≥gica para mostrar tablas espec√≠ficas
            addMessage(`<h3>üìä Tablas de Datos</h3>
                       <p>Tablas organizadas por tipo de dato:</p>
                       <div class="quick-actions" style="margin: 20px 0;">
                           <button class="quick-btn" onclick="showTopic('tabla-calores-especificos')">
                               <i class="material-icons">thermostat</i>Calores Espec√≠ficos
                           </button>
                           <button class="quick-btn" onclick="showTopic('tabla-calores-latentes')">
                               <i class="material-icons">water</i>Calores Latentes
                           </button>
                           <button class="quick-btn" onclick="showTopic('tabla-dilatacion')">
                               <i class="material-icons">expand</i>Coef. Dilataci√≥n
                           </button>
                           <button class="quick-btn" onclick="showTopic('tabla-conductividad')">
                               <i class="material-icons">swap_vert</i>Conductividad
                           </button>
                       </div>
                       <p><strong>üí° Tambi√©n puedes usar el men√∫ lateral en la secci√≥n "Tablas de Datos"</strong></p>`, 'bot');
        }

        function showGreeting() {
            addMessage(`<h3>üëã ¬°Bienvenido al ChatBot de F√≠sica UNALM!</h3>
                       <p>Soy tu asistente educativo avanzado para el curso de <strong>F√≠sica General - Temperatura y Calor</strong>.</p>
                       
                       <div class="note-box">
                           <strong>üéì INFORMACI√ìN ACAD√âMICA:</strong><br>
                           ‚Ä¢ <strong>Universidad:</strong> Nacional Agraria La Molina (UNALM)<br>
                           ‚Ä¢ <strong>Facultad:</strong> Ciencias<br>
                           ‚Ä¢ <strong>Departamento:</strong> F√≠sica y Meteorolog√≠a<br>
                           ‚Ä¢ <strong>Docente:</strong> Julio Cesar Chapo√±an Sandoval<br>
                           ‚Ä¢ <strong>Curso:</strong> F√≠sica General - Nivelaci√≥n 2025-II<br>
                           ‚Ä¢ <strong>Contacto:</strong> jchapanan@lamolina.edu.pe
                       </div>
                       
                       <div class="note-box">
                           <strong>üí° CARACTER√çSTICAS AVANZADAS:</strong><br>
                           ‚Ä¢ Teor√≠a completa con explicaciones detalladas<br>
                           ‚Ä¢ Ejercicios resueltos paso a paso<br>
                           ‚Ä¢ Simulaciones interactivas<br>
                           ‚Ä¢ Tests de conocimiento<br>
                           ‚Ä¢ Calculadora cient√≠fica<br>
                           ‚Ä¢ Juegos educativos<br>
                           ‚Ä¢ Sistema de progreso personalizado
                       </div>
                       
                       <p><strong>üéØ Para comenzar:</strong></p>
                       <ol>
                           <li>Usa el <strong>men√∫ lateral</strong> para navegar por todos los temas</li>
                           <li>Escribe tus preguntas en el cuadro de texto</li>
                           <li>Usa los botones de preguntas r√°pidas para temas comunes</li>
                           <li>Explora las herramientas interactivas (simulaciones, juegos, tests)</li>
                           <li>Configura tu experiencia en el men√∫ de configuraci√≥n</li>
                       </ol>
                       
                       <div style="text-align: center; margin-top: 20px;">
                           <button class="quiz-action" onclick="showTopic('temperatura')" style="background: var(--gradient-primary);">
                               <i class="material-icons">play_arrow</i> Comenzar con Temperatura
                           </button>
                           <button class="quiz-action" onclick="startQuiz()" style="background: var(--gradient-accent);">
                               <i class="material-icons">quiz</i> Realizar Test Inicial
                           </button>
                       </div>`, 'bot');
        }

        function showDefaultResponse(input) {
            // An√°lisis de similitud para sugerir temas
            const suggestions = getSuggestions(input);
            
            addMessage(`<h3>ü§î He recibido tu pregunta:</h3>
                       <div class="formula-box" style="font-style: italic; background: rgba(255,255,255,0.05);">
                           "${input}"
                       </div>
                       
                       <p><strong>üîç Sugerencias basadas en tu consulta:</strong></p>
                       ${suggestions}
                       
                       <div class="note-box">
                           <strong>üí° Tambi√©n puedes:</strong><br>
                           1. Usar el <strong>buscador</strong> en el panel lateral<br>
                           2. Explorar el <strong>men√∫ completo</strong> de temas<br>
                           3. Usar <strong>comandos espec√≠ficos</strong> como:<br>
                           &nbsp;&nbsp;‚Ä¢ "Ejercicio de aluminio"<br>
                           &nbsp;&nbsp;‚Ä¢ "Tabla de calores espec√≠ficos"<br>
                           &nbsp;&nbsp;‚Ä¢ "Simulaci√≥n de dilataci√≥n"<br>
                           4. Configurar el sistema en <strong>Configuraci√≥n</strong>
                       </div>
                       
                       <div style="text-align: center; margin-top: 20px;">
                           <button class="quick-question" onclick="showModal('helpModal')" style="padding: 12px 25px;">
                               <i class="material-icons">help</i> Ver Ayuda Completa
                           </button>
                           <button class="quick-question" onclick="showModal('configModal')" style="padding: 12px 25px;">
                               <i class="material-icons">settings</i> Configuraci√≥n
                           </button>
                       </div>`, 'bot');
        }

        function getSuggestions(input) {
            const words = input.toLowerCase().split(' ');
            let matches = [];
            
            for (const item of searchIndex) {
                let score = 0;
                for (const word of words) {
                    if (item.keywords.some(keyword => keyword.includes(word))) {
                        score++;
                    }
                }
                if (score > 0) {
                    matches.push({ id: item.id, title: item.title, score: score });
                }
            }
            
            matches.sort((a, b) => b.score - a.score);
            matches = matches.slice(0, 3); // Top 3 sugerencias
            
            if (matches.length > 0) {
                let html = '<div class="quick-actions" style="margin: 15px 0;">';
                matches.forEach(match => {
                    html += `<button class="quick-btn" onclick="showTopic('${match.id}')">
                                <i class="material-icons">arrow_forward</i>${match.title}
                             </button>`;
                });
                html += '</div>';
                return html;
            }
            
            return '<p>Te sugiero explorar los temas principales desde el men√∫ lateral.</p>';
        }

        function sendMessage() {
            const input = userInput.value.trim();
            if (!input) return;
            
            addMessage(input, 'user');
            userInput.value = '';
            
            // Mostrar indicador de escritura
            showTypingIndicator();
            
            // Simular tiempo de procesamiento (m√°s realista)
            const thinkingTime = Math.min(1000 + Math.random() * 2000, 3000);
            
            setTimeout(() => {
                removeTypingIndicator();
                getResponse(input);
            }, thinkingTime);
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot-message';
            typingDiv.id = 'typingIndicator';
            
            typingDiv.innerHTML = `
                <div class="message-header">
                    <div class="message-avatar bot-avatar">ü§ñ</div>
                    <div class="message-sender bot-sender">Asistente de F√≠sica UNALM</div>
                    <div class="message-time">
                        <i class="material-icons">schedule</i>${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
                    </div>
                </div>
                <div class="message-content">
                    <div class="typing-indicator">
                        <div class="typing-dots">
                            <span></span><span></span><span></span>
                        </div>
                        <span>Procesando tu pregunta...</span>
                    </div>
                </div>
            `;
            
            chatBody.appendChild(typingDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        function removeTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) {
                chatBody.removeChild(indicator);
            }
        }

        function askQuestion(question) {
            userInput.value = question;
            sendMessage();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // ===== FUNCIONES DE B√öSQUEDA =====
        function searchTopics(query) {
            if (!query.trim()) {
                searchResults.innerHTML = '';
                searchResults.style.display = 'none';
                return;
            }
            
            const results = searchIndex.filter(item => 
                item.title.toLowerCase().includes(query.toLowerCase()) ||
                item.keywords.some(keyword => keyword.toLowerCase().includes(query.toLowerCase()))
            );
            
            displaySearchResults(results);
        }

        function displaySearchResults(results) {
            searchResults.innerHTML = '';
            
            if (results.length === 0) {
                searchResults.innerHTML = `
                    <div class="search-result-item" style="color: #a0a0ff; justify-content: center;">
                        <i class="material-icons">search_off</i>
                        <span>No se encontraron resultados</span>
                    </div>
                `;
            } else {
                results.forEach(item => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'search-result-item';
                    resultItem.innerHTML = `
                        <i class="material-icons">search</i>
                        <span>${item.title}</span>
                    `;
                    resultItem.onclick = () => {
                        showTopic(item.id);
                        searchResults.style.display = 'none';
                        document.getElementById('searchInput').value = '';
                    };
                    searchResults.appendChild(resultItem);
                });
            }
            
            searchResults.style.display = 'block';
        }

        function showSearchResults() {
            const query = document.getElementById('searchInput').value;
            if (query.trim()) {
                searchResults.style.display = 'block';
            }
        }

        // Cerrar resultados al hacer clic fuera
        document.addEventListener('click', (event) => {
            if (!event.target.closest('.search-container')) {
                searchResults.style.display = 'none';
            }
        });

        // ===== FUNCIONES DE INTERFAZ =====
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('show');
        }

        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function clearChat() {
            if (confirm('¬øEst√°s seguro de que quieres limpiar toda la conversaci√≥n? Se perder√° el historial.')) {
                chatBody.innerHTML = '';
                messageCount = 0;
                showNotification('üí´ Chat Reiniciado', 'La conversaci√≥n ha sido limpiada. ¬øEn qu√© puedo ayudarte ahora?');
                
                // Mensaje de bienvenida despu√©s de limpiar
                setTimeout(() => {
                    showGreeting();
                }, 500);
            }
        }

        function showNotification(title, message) {
            document.getElementById('notificationTitle').textContent = title;
            document.getElementById('notificationText').textContent = message;
            
            const notification = document.getElementById('notification');
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }

        function updateStats() {
            // Actualizar contador de tiempo de sesi√≥n
            const now = new Date();
            const diff = Math.floor((now - sessionStartTime) / 1000);
            const minutes = Math.floor(diff / 60);
            const seconds = diff % 60;
            document.getElementById('sessionTime').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Actualizar contador de temas (simulado)
            const topicCount = Math.min(20, Math.floor(messageCount / 3) + 5);
            document.getElementById('topicCount').textContent = topicCount;
            
            // Actualizar contador de ejercicios (simulado)
            const exerciseCount = Math.min(15, Math.floor(messageCount / 4) + 3);
            document.getElementById('exerciseCount').textContent = exerciseCount;
        }

        function updateProgress(topicId) {
            // Actualizar barra de progreso global (simulado)
            const progress = Math.min(100, 35 + Math.floor(Math.random() * 10));
            document.getElementById('globalProgress').style.width = `${progress}%`;
        }

        // ===== FUNCIONES DE CONVERSI√ìN DE TEMPERATURA =====
        let tempInput = '0';
        let tempUnit = 'C';

        function convertTemperature(conversion) {
            let value = parseFloat(tempInput) || 0;
            let result = '';
            
            switch(conversion) {
                case 'CtoK':
                    result = `${value} ¬∞C = ${(value + 273.15).toFixed(2)} K`;
                    break;
                case 'KtoC':
                    result = `${value} K = ${(value - 273.15).toFixed(2)} ¬∞C`;
                    break;
                case 'CtoF':
                    result = `${value} ¬∞C = ${(value * 9/5 + 32).toFixed(2)} ¬∞F`;
                    break;
                case 'FtoC':
                    result = `${value} ¬∞F = ${((value - 32) * 5/9).toFixed(2)} ¬∞C`;
                    break;
                case 'KtoF':
                    result = `${value} K = ${((value - 273.15) * 9/5 + 32).toFixed(2)} ¬∞F`;
                    break;
                case 'FtoK':
                    result = `${value} ¬∞F = ${((value - 32) * 5/9 + 273.15).toFixed(2)} K`;
                    break;
            }
            
            document.getElementById('tempConversionDisplay').textContent = result;
        }

        function addTempDigit(digit) {
            if (digit === '.' && tempInput.includes('.')) return;
            tempInput = tempInput === '0' ? digit : tempInput + digit;
            updateTempDisplay();
        }

        function clearTempConversion() {
            tempInput = '0';
            updateTempDisplay();
        }

        function updateTempDisplay() {
            document.getElementById('tempConversionDisplay').textContent = 
                `${tempInput} ¬∞C = ${(parseFloat(tempInput) + 273.15).toFixed(2)} K = ${(parseFloat(tempInput) * 9/5 + 32).toFixed(2)} ¬∞F`;
        }

        function calculateTempConversion() {
            // Ya se calcula en tiempo real
        }

        // ===== FUNCIONES DE SIMULACI√ìN =====
        function startTempSimulation() {
            showNotification('üéÆ Simulaci√≥n Iniciada', 'La simulaci√≥n molecular est√° en ejecuci√≥n. Ajusta los controles para ver cambios.');
        }

        function updateTempSim(value) {
            document.getElementById('tempSimValue').textContent = `${value} K`;
            document.getElementById('simTempValue').textContent = `${value} K`;
            
            // Calcular energ√≠a cin√©tica promedio (para gas monoat√≥mico)
            const energy = (3/2) * 1.38e-23 * value;
            document.getElementById('simEnergyValue').textContent = `${energy.toExponential(2)} J`;
        }

        function updateSpeedSim(value) {
            document.getElementById('speedSimValue').textContent = `${value} m/s`;
        }

        // ===== FUNCIONES DE QUIZ =====
        let quizAnswers = {};

        function checkQuizAnswer(element, answer, questionNum) {
            // Remover selecci√≥n previa en esta pregunta
            const parent = element.parentElement;
            const options = parent.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            // Seleccionar esta opci√≥n
            element.classList.add('selected');
            
            // Guardar respuesta
            quizAnswers[questionNum] = answer;
            
            // Mostrar feedback inmediato para algunas preguntas
            showImmediateFeedback(questionNum, answer);
        }

        function showImmediateFeedback(questionNum, answer) {
            const feedbackDiv = document.getElementById(`quizFeedback${questionNum}`);
            if (!feedbackDiv) return;
            
            // Respuestas correctas (simuladas)
            const correctAnswers = {
                1: 'C',  // Temperatura
                2: 'A',  // Conversi√≥n 25¬∞C
                3: 'C',  // Primera Ley (250 J)
                4: 'A',  // 5000 J a kcal
                5: 'C',  // Experimento de Joule
                6: 'B',  // Puente de acero
                7: 'B',  // Rieles ferrocarril
                8: 'C'   // Œ≥ = 3Œ±
            };
            
            const isCorrect = answer === correctAnswers[questionNum];
            
            feedbackDiv.className = `quiz-feedback ${isCorrect ? 'correct' : 'incorrect'} show`;
            feedbackDiv.innerHTML = isCorrect ? 
                `<strong>‚úÖ Correcto!</strong> Tu respuesta es correcta.` :
                `<strong>‚ùå Incorrecto</strong> La respuesta correcta es ${correctAnswers[questionNum]}`;
        }

        function showQuizResults() {
            let correctCount = 0;
            let totalQuestions = Object.keys(quizAnswers).length;
            
            // Contar respuestas correctas (simulado)
            const correctAnswers = {1:'C', 2:'A', 3:'C', 4:'A', 5:'C', 6:'B', 7:'B', 8:'C'};
            
            for (const [q, a] of Object.entries(quizAnswers)) {
                if (a === correctAnswers[q]) correctCount++;
            }
            
            const score = totalQuestions > 0 ? Math.round((correctCount / totalQuestions) * 100) : 0;
            
            addMessage(`<h3>üìä Resultados del Test</h3>
                       <div class="quiz-results">
                           <div class="quiz-score">${score}%</div>
                           <p><strong>${correctCount} de ${totalQuestions} respuestas correctas</strong></p>
                           <div class="progress-bar" style="margin: 20px auto; max-width: 300px;">
                               <div class="progress-fill" style="width: ${score}%;"></div>
                           </div>
                           <p style="color: #a0a0ff; margin-top: 15px;">
                               ${score >= 80 ? 'üéâ Excelente! Dominas el tema.' : 
                                 score >= 60 ? 'üëç Buen trabajo, pero hay temas por reforzar.' :
                                 'üìö Te sugiero revisar los conceptos nuevamente.'}
                           </p>
                       </div>
                       <button class="quiz-action" onclick="startQuiz()" style="margin-top: 20px;">
                           <i class="material-icons">replay</i> Intentar Otro Test
                       </button>`, 'bot');
            
            // Reiniciar respuestas
            quizAnswers = {};
        }

        function startQuiz() {
            addMessage(`<h3>üß† Test de Conocimientos - Temperatura y Calor</h3>
                       <p>Vamos a evaluar tu comprensi√≥n de los conceptos fundamentales.</p>
                       <div class="note-box">
                           <strong>üìù Instrucciones:</strong><br>
                           1. Lee cada pregunta cuidadosamente<br>
                           2. Selecciona la respuesta que consideres correcta<br>
                           3. Puedes cambiar tu respuesta antes de finalizar<br>
                           4. Al final ver√°s tu puntuaci√≥n y retroalimentaci√≥n<br>
                           5. No hay tiempo l√≠mite, toma tu tiempo
                       </div>
                       <button class="quiz-action" onclick="showTopic('temperatura')">
                           <i class="material-icons">menu_book</i> Repasar Temas Primero
                       </button>
                       <button class="quiz-action" style="background: var(--gradient-accent);" 
                               onclick="showTopic('quiz-temperatura')">
                           <i class="material-icons">play_arrow</i> Comenzar Test
                       </button>`, 'bot');
        }

        // ===== FUNCIONES DE CONFIGURACI√ìN =====
        function changeTheme(theme) {
            showNotification('üé® Tema Cambiado', `Se ha aplicado el tema: ${theme}`);
        }

        function changeFontSize(size) {
            document.documentElement.style.fontSize = `${size}px`;
            showNotification('üî† Tama√±o de Fuente', `Tama√±o ajustado a ${size}px`);
        }

        function toggleAnimations(enabled) {
            if (enabled) {
                document.body.classList.remove('no-animations');
                showNotification('‚ú® Animaciones Activadas', 'Las animaciones est√°n ahora activas');
            } else {
                document.body.classList.add('no-animations');
                showNotification('‚è∏Ô∏è Animaciones Desactivadas', 'Las animaciones est√°n ahora desactivadas');
            }
        }

        function saveSettings() {
            showNotification('‚úÖ Configuraci√≥n Guardada', 'Tus preferencias han sido guardadas correctamente');
            closeModal('configModal');
        }

        // ===== FUNCIONES ADICIONALES =====
        function voiceInput() {
            showNotification('üé§ Entrada por Voz', 'Esta funci√≥n est√° en desarrollo. Por ahora, escribe tu pregunta.');
        }

        function exportChat() {
            showNotification('üì• Exportar Chat', 'La funci√≥n de exportaci√≥n est√° en desarrollo. Pr√≥ximamente disponible.');
        }

        function printChat() {
            window.print();
            showNotification('üñ®Ô∏è Imprimir', 'Preparando para imprimir...');
        }

        // ===== INICIALIZACI√ìN MEJORADA =====
        window.onload = function() {
            // Mensaje de bienvenida inicial
            setTimeout(() => {
                showGreeting();
                
                // Mostrar notificaci√≥n de bienvenida
                showNotification('üéì Bienvenido al ChatBot de F√≠sica', 
                               'Explora todos los temas, ejercicios y herramientas interactivas disponibles.');
                
                // Inicializar gr√°ficos si es necesario
                initializeCharts();
            }, 1000);
            
            // Configurar eventos
            userInput.addEventListener('keypress', handleKeyPress);
            userInput.focus();
            
            // Inicializar temporizador de sesi√≥n
            setInterval(updateStats, 1000);
            
            // Configurar MathJax
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        };

        function initializeCharts() {
            // Gr√°fico de densidad del agua vs temperatura
            const ctx = document.getElementById('waterDensityChart');
            if (ctx) {
                new Chart(ctx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: ['0', '1', '2', '3', '4', '5', '10', '20', '30', '40', '50', '60', '70', '80', '90', '100'],
                        datasets: [{
                            label: 'Densidad del Agua (g/cm¬≥)',
                            data: [0.99984, 0.99990, 0.99994, 0.99998, 1.00000, 0.99999, 0.99970, 0.99821, 0.99565, 0.99222, 0.98807, 0.98321, 0.97778, 0.97183, 0.96531, 0.95838],
                            borderColor: '#64ffda',
                            backgroundColor: 'rgba(100, 255, 218, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Anomal√≠a del Agua: Densidad vs Temperatura',
                                color: '#64ffda',
                                font: {
                                    size: 16,
                                    family: 'Roboto'
                                }
                            },
                            legend: {
                                labels: {
                                    color: '#e6f1ff',
                                    font: {
                                        size: 14
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Temperatura (¬∞C)',
                                    color: '#a0a0ff'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#e6f1ff'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Densidad (g/cm¬≥)',
                                    color: '#a0a0ff'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#e6f1ff'
                                }
                            }
                        }
                    }
                });
            }
        }

        // ===== FUNCIONES DE SIMULACI√ìN DE DILATACI√ìN =====
        function updateMaterialSim() {
            const material = document.getElementById('materialSelect').value;
            const materials = {
                'acero': { alpha: 12, name: 'Acero' },
                'aluminio': { alpha: 23, name: 'Aluminio' },
                'cobre': { alpha: 17, name: 'Cobre' },
                'vidrio': { alpha: 8.5, name: 'Vidrio' },
                'invar': { alpha: 1.2, name: 'Invar' },
                'plomo': { alpha: 29, name: 'Plomo' }
            };
            
            const selected = materials[material];
            document.getElementById('simAlphaValue').textContent = 
                `${selected.alpha} √ó 10‚Åª‚Å∂ ¬∞C‚Åª¬π`;
            
            calculateDilatacion();
        }

        function updateLengthSim(value) {
            document.getElementById('lengthSimValue').textContent = `${value} m`;
            document.getElementById('simL0Value').textContent = value;
            calculateDilatacion();
        }

        function updateDeltaTSim(value) {
            document.getElementById('deltatSimValue').textContent = `${value} ¬∞C`;
            calculateDilatacion();
        }

        function calculateDilatacion() {
            const length = parseFloat(document.getElementById('lengthSimValue').textContent);
            const deltaT = parseFloat(document.getElementById('deltatSimValue').textContent);
            const alphaText = document.getElementById('simAlphaValue').textContent;
            const alpha = parseFloat(alphaText) * 1e-6; // Convertir a ¬∞C‚Åª¬π
            
            const deltaL = length * alpha * deltaT;
            const Lf = length + deltaL;
            const porcentaje = (deltaL / length) * 100;
            
            // Actualizar valores
            document.getElementById('simDeltaLValue').textContent = deltaL.toFixed(5);
            document.getElementById('simLfValue').textContent = Lf.toFixed(5);
            document.getElementById('simDilatacionValue').textContent = `${(deltaL * 1000).toFixed(2)} mm`;
            document.getElementById('simPorcentajeValue').textContent = `${porcentaje.toFixed(3)}%`;
            document.getElementById('formulaValues').textContent = 
                `${length} √ó ${(alpha * 1e6).toFixed(1)}e-6 √ó ${deltaT}`;
            
            // Actualizar visualizaci√≥n
            const dilatedBar = document.getElementById('dilatedBar');
            const dilatacionWidth = (deltaL / length) * 200; // 200px es el ancho base
            dilatedBar.style.setProperty('--dilatacion-width', `${dilatacionWidth}px`);
            
            // Actualizar posici√≥n del indicador
            const indicator = document.getElementById('dilatacionIndicator');
            indicator.style.left = `calc(250px + ${dilatacionWidth}px)`;
        }

        function resetDilatacionSim() {
            document.getElementById('materialSelect').value = 'aluminio';
            document.getElementById('lengthSimSlider').value = 2;
            document.getElementById('deltatSimSlider').value = 50;
            
            document.getElementById('lengthSimValue').textContent = '2.0 m';
            document.getElementById('deltatSimValue').textContent = '50 ¬∞C';
            
            updateMaterialSim();
            calculateDilatacion();
            
            showNotification('üîÑ Simulaci√≥n Reiniciada', 'Valores restablecidos a configuraci√≥n inicial');
        }

        function showDilatacionExamples() {
            addMessage(`<h3>üìö Ejemplos de Dilataci√≥n en la Vida Real</h3>
                       <div class="exercise-box">
                           <strong>1. Puente Golden Gate (San Francisco)</strong><br>
                           Longitud: 2737 m<br>
                           Œ± (acero): 12√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π<br>
                           ŒîT entre invierno y verano: ~30¬∞C<br>
                           ŒîL = 2737 √ó 12e-6 √ó 30 = 0.985 m ‚âà 1 metro!<br>
                           <span style="color: #a0a0ff; font-size: 14px;">Por eso tiene juntas de dilataci√≥n</span>
                       </div>
                       
                       <div class="exercise-box">
                           <strong>2. Rieles de ferrocarril</strong><br>
                           Longitud est√°ndar: 25 m<br>
                           Material: Acero (Œ±=12√ó10‚Åª‚Å∂ ¬∞C‚Åª¬π)<br>
                           ŒîT estacional: 40¬∞C<br>
                           ŒîL por riel = 25 √ó 12e-6 √ó 40 = 0.012 m = 12 mm<br>
                           <span style="color: #a0a0ff; font-size: 14px;">Espacio t√≠pico entre rieles: 6-10 mm</span>
                       </div>
                       
                       <div class="exercise-box">
                           <strong>3. L√≠neas el√©ctricas de alta tensi√≥n</strong><br>
                           En verano se pandean m√°s por dilataci√≥n<br>
                           En invierno se tensan por contracci√≥n<br>
                           <span style="color: #a0a0ff; font-size: 14px;">Se calcula la flecha m√°xima para evitar contacto con el suelo</span>
                       </div>`, 'bot');
        }

        // ===== FUNCIONES DE LA CALCULADORA DE DILATACI√ìN =====
        let dilatacionCalcState = {
            L0: '',
            alpha: '',
            deltaT: '',
            currentInput: 'L0'
        };

        function dilatacionCalcInput(field) {
            dilatacionCalcState.currentInput = field;
            updateDilatacionCalcDisplay();
        }

        function dilatacionCalcDigit(digit) {
            const field = dilatacionCalcState.currentInput;
            if (digit === 'e-6') {
                dilatacionCalcState[field] += '√ó10‚Åª‚Å∂';
            } else {
                dilatacionCalcState[field] = dilatacionCalcState[field] === '' ? digit : dilatacionCalcState[field] + digit;
            }
            updateDilatacionCalcDisplay();
        }

        function dilatacionCalcClear() {
            dilatacionCalcState = { L0: '', alpha: '', deltaT: '', currentInput: 'L0' };
            updateDilatacionCalcDisplay();
        }

        function dilatacionCalcMaterial(material) {
            const alphas = {
                'acero': '12√ó10‚Åª‚Å∂',
                'aluminio': '23√ó10‚Åª‚Å∂',
                'cobre': '17√ó10‚Åª‚Å∂',
                'vidrio': '8.5√ó10‚Åª‚Å∂'
            };
            
            dilatacionCalcState.alpha = alphas[material] || '';
            dilatacionCalcState.currentInput = 'alpha';
            updateDilatacionCalcDisplay();
            
            showNotification('üîß Material Seleccionado', `Coeficiente de ${material} establecido`);
        }

        function updateDilatacionCalcDisplay() {
            const state = dilatacionCalcState;
            let display = 'ŒîL = L‚ÇÄ √ó Œ± √ó ŒîT = ';
            
            if (state.L0) display += `${state.L0} √ó `;
            else display += 'L‚ÇÄ √ó ';
            
            if (state.alpha) display += `${state.alpha} √ó `;
            else display += 'Œ± √ó ';
            
            if (state.deltaT) display += state.deltaT;
            else display += 'ŒîT';
            
            // Resaltar el campo actual
            display = display.replace(state.currentInput === 'L0' ? 'L‚ÇÄ' : 
                                     state.currentInput === 'alpha' ? 'Œ±' : 'ŒîT',
                                     `<span class="highlight">${state.currentInput === 'L0' ? 'L‚ÇÄ' : 
                                      state.currentInput === 'alpha' ? 'Œ±' : 'ŒîT'}</span>`);
            
            document.getElementById('dilatacionCalcDisplay').innerHTML = display;
        }

        function dilatacionCalcCalculate() {
            const L0 = parseFloat(dilatacionCalcState.L0) || 0;
            const alphaText = dilatacionCalcState.alpha || '0';
            const alpha = parseFloat(alphaText.replace('√ó10‚Åª‚Å∂', '')) * 1e-6 || 0;
            const deltaT = parseFloat(dilatacionCalcState.deltaT) || 0;
            
            const deltaL = L0 * alpha * deltaT;
            const Lf = L0 + deltaL;
            
            if (L0 && alpha && deltaT) {
                addMessage(`<h3>üßÆ Resultado del C√°lculo de Dilataci√≥n</h3>
                           <div class="formula-box">
                               <strong>Datos:</strong><br>
                               L‚ÇÄ = ${L0} m<br>
                               Œ± = ${alpha * 1e6} √ó 10‚Åª‚Å∂ ¬∞C‚Åª¬π<br>
                               ŒîT = ${deltaT} ¬∞C<br><br>
                               <strong>C√°lculo:</strong><br>
                               ŒîL = L‚ÇÄ √ó Œ± √ó ŒîT = ${L0} √ó ${alpha} √ó ${deltaT}<br>
                               ŒîL = ${deltaL.toFixed(6)} m = ${(deltaL * 1000).toFixed(3)} mm<br><br>
                               <strong>Longitud final:</strong><br>
                               L_f = L‚ÇÄ + ŒîL = ${L0} + ${deltaL.toFixed(6)} = ${Lf.toFixed(6)} m<br><br>
                               <strong>Porcentaje de aumento:</strong><br>
                               (${deltaL.toFixed(6)} / ${L0}) √ó 100% = ${(deltaL/L0*100).toFixed(4)}%
                           </div>`, 'bot');
            } else {
                showNotification('‚ö†Ô∏è Datos Incompletos', 'Por favor, ingresa todos los valores necesarios');
            }
        }

        // ===== INICIALIZACI√ìN FINAL =====
        // Asegurar que MathJax se procese despu√©s de cargar contenido din√°mico
        document.addEventListener('DOMContentLoaded', function() {
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        });

        // Configurar eventos para cerrar modales con Escape
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                document.querySelectorAll('.modal-overlay').forEach(modal => {
                    modal.style.display = 'none';
                });
            }
        });

        // Inicializar simulaci√≥n de dilataci√≥n
        setTimeout(() => {
            updateMaterialSim();
        }, 2000);
    </script>
</body>
</html>
